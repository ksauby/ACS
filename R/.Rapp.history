setwd('/Users/KSauby/Documents/Projects/ACS/R')
A[[i]] <- list()#
		A[[i]] <- X.grp %>%#
			summarise_(#
				# save true mean#
				var_true_mean = interp(#
					~var[1], #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean", #
							sep=""#
						)#
					)#
				),#
				# calculate mean of observed means#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate sum of MSEs#
				var_sum_of_observed_minus_true_sqrd = interp(#
					~sum(var^2, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed_minus_true",#
							sep=""#
						)#
					)#
				),#
				# calculate mean of simulated HT variance estimates#
				var_mean_of_var_estimates = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_var_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate variance of simulated HT mean estimates#
				var_var_of_mean_estimates = interp(#
					~var(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				)#
			)
setwd('/Users/KSauby/Documents/Projects/ACS/R')
A[[i]] <- list()#
		A[[i]] <- X.grp %>%#
			summarise_(#
				# save true mean#
				var_true_mean = interp(#
					~var[1], #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean", #
							sep=""#
						)#
					)#
				),#
				# calculate mean of observed means#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate sum of MSEs#
				var_sum_of_observed_minus_true_sqrd = interp(#
					~sum(var^2, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed_minus_true",#
							sep=""#
						)#
					)#
				),#
				# calculate mean of simulated HT variance estimates#
				var_mean_of_var_estimates = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_var_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate variance of simulated HT mean estimates#
				var_var_of_mean_estimates = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				)#
			)
?var
?stats::var
setwd('/Users/KSauby/Documents/Projects/ACS/R')
A[[i]] <- list()#
		A[[i]] <- X.grp %>%#
			summarise_(#
				# save true mean#
				var_true_mean = interp(#
					~var[1], #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean", #
							sep=""#
						)#
					)#
				),#
				# calculate mean of observed means#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate sum of MSEs#
				var_sum_of_observed_minus_true_sqrd = interp(#
					~sum(var^2, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed_minus_true",#
							sep=""#
						)#
					)#
				),#
				# calculate mean of simulated HT variance estimates#
				var_mean_of_var_estimates = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_var_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate variance of simulated HT mean estimates#
				var_var_of_mean_estimates = interp(#
					~stats::var(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				)#
			) %>%#
			as.data.frame
setwd('/Users/KSauby/Documents/Projects/ACS/R')
A[[i]] <- list()#
		A[[i]] <- X.grp %>%#
			summarise_(#
				# save true mean#
				var_true_mean = interp(#
					~var[1], #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean", #
							sep=""#
						)#
					)#
				),#
				# calculate mean of observed means#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate sum of MSEs#
				var_sum_of_observed_minus_true_sqrd = interp(#
					~sum(var^2, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed_minus_true",#
							sep=""#
						)#
					)#
				),#
				# calculate mean of simulated HT variance estimates#
				var_mean_of_var_estimates = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_var_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate variance of simulated HT mean estimates#
				var_var_of_mean_estimates = interp(#
					~stats::var(variable, na.rm = TRUE), #
					variable = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				)#
			) %>%#
			as.data.frame
setwd('/Users/KSauby/Documents/Projects/ACS/R')
A[[i]] <- list()#
		A[[i]] <- X.grp %>%#
			summarise_(#
				# save true mean#
				var_true_mean = interp(#
					~var[1], #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean", #
							sep=""#
						)#
					)#
				),#
				# calculate mean of observed means#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate sum of MSEs#
				var_sum_of_observed_minus_true_sqrd = interp(#
					~sum(var^2, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed_minus_true",#
							sep=""#
						)#
					)#
				),#
				# calculate mean of simulated HT variance estimates#
				var_mean_of_var_estimates = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_var_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate variance of simulated HT mean estimates#
				var_var_of_mean_estimates = interp(#
					~var(variable, na.rm = TRUE), #
					variable = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				)#
			) %>%#
			as.data.frame
setwd('/Users/KSauby/Documents/Projects/ACS/R')
for (i in 1:length(variables)) {#
		A[[i]] <- list()#
		A[[i]] <- X.grp %>%#
			summarise_(#
				# calculate mean of observed means#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				)#
			)#
		}
A[[i]]
dim(A)
str(A)
A
setwd('/Users/KSauby/Documents/Projects/ACS/R')
paste(#
		      		variables[i],#
		      		"_mean_observed",#
		      		sep=""#
				)
setwd('/Users/KSauby/Documents/Projects/ACS/R')
. <- NULL#
	X <- merge(population_data_summary, simulation_data, by=grouping.variables)#
	# number of simulations#
	n_sims <- X %>% #
		group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots")) %>%#
		summarise(n_sims = length(N.Total.plots))#
	# mean of observed means	#
	for (i in 1:length(variables)) {#
		A[[i]] <- list()#
		A[[i]] <- X.grp %>%#
			summarise_(#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				)#
			) %>%#
			setnames(#
		      	.,#
		      	"var_mean_observed",#
		      	paste(#
		      		variables[i],#
		      		"_mean_of_mean_observed",#
		      		sep=""#
				)#
			)#
		}
setwd('/Users/KSauby/Documents/Projects/ACS/R')
X <- merge(X, n_sims, by=c(grouping.variables, "N.SRSWOR.plots"))#
	# calculate squared differences for each simulation and variable#
	for (i in 1:length(variables)) {#
		for (j in 1:length(statistics)) {#
			X %<>%#
				mutate(#
					var_observed_minus_true = #
							# (observed -#
							eval(#
								parse(#
									text=paste(#
										"X$", #
										variables[i], #
										"_", #
										statistics[j], #
										"_observed", #
										sep=""#
									)#
								)#
							) - #
							# true)#
							eval(#
								parse(#
									text=paste(#
										"X$", #
										variables[i], #
										"_", #
										statistics[j], #
										sep=""#
									)#
								)#
							)#
				) %>%#
				setnames(#
					., #
					"var_observed_minus_true", #
					paste(#
						variables[i], #
						"_", #
						statistics[j], #
						"_observed_minus_true", #
						sep=""#
					)#
				)	#
			}#
	}#
	if (!(is.null(rvar))) {#
		for (i in 1:length(rvar)) {#
			for (j in 1:length(ratio.statistics)) {#
				X %<>%#
					mutate(#
						var_observed_minus_true = #
								# (observed -#
								eval(parse(text=paste(#
									"X$", #
									rvar[i],#
								 	"_", #
									ratio.statistics[j], #
									"_observed", #
									sep=""#
								))) - #
								# true)#
								eval(parse(text=paste(#
									"X$", #
									rvar[i], #
									"_ratio_", #
									ratio.statistics[j], #
									sep=""#
								)))#
					) %>%#
					setnames(#
						., #
						"var_observed_minus_true", #
						paste(#
							rvar[i], #
							"_", #
							ratio.statistics[j], #
							"_observed_minus_true", #
							sep=""#
						)#
					)#
			}#
		}#
	}#
	# calculate bias and MSE#
	X.grp <- X %>% group_by_(.dots=c(grouping.variables, "n_sims"))#
	A <- vector("list", length(variables))#
	for (i in 1:length(variables)) {#
		A[[i]] <- list()#
		A[[i]] <- X.grp %>%#
			summarise_(#
				# save true mean#
				var_true_mean = interp(#
					~var[1], #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean", #
							sep=""#
						)#
					)#
				),#
				# calculate mean of observed means#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate sum of MSEs#
				var_sum_of_observed_minus_true_sqrd = interp(#
					~sum(var^2, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed_minus_true",#
							sep=""#
						)#
					)#
				),#
				# calculate mean of simulated HT variance estimates#
				var_mean_of_var_estimates = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_var_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate variance of simulated HT mean estimates#
				var_var_of_mean_estimates = interp(#
					~var(variable, na.rm = TRUE), #
					variable = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				)#
			) %>%#
			as.data.frame
}
A
setwd('/Users/KSauby/Documents/Projects/ACS/R')
. <- NULL#
	X <- merge(population_data_summary, simulation_data, by=grouping.variables)#
	# number of simulations#
	n_sims <- X %>% #
		group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots")) %>%#
		summarise(n_sims = length(N.Total.plots))#
	# mean of observed means	#
	for (i in 1:length(variables)) {#
		A[[i]] <- list()#
		A[[i]] <- X.grp %>%#
			summarise_(#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				)#
			) %>%#
			setnames(#
		      	.,#
		      	"var_mean_of_observed_means",#
		      	paste(#
		      		variables[i],#
		      		"_mean_of_observed_means",#
		      		sep=""#
				)#
			)#
	}
A
setwd('/Users/KSauby/Documents/Projects/ACS/R')
. <- NULL#
	X <- merge(population_data_summary, simulation_data, by=grouping.variables)#
	# number of simulations#
	n_sims <- X %>% #
		group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots")) %>%#
		summarise(n_sims = length(N.Total.plots))#
	X <- merge(X, n_sims, by=c(grouping.variables, "N.SRSWOR.plots"))#
	# mean of observed means	#
	for (i in 1:length(variables)) {#
		A[[i]] <- list()#
		A[[i]] <- X.grp %>%#
			summarise_(#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				)#
			) %>%#
			setnames(#
		      	.,#
		      	"var_mean_of_observed_means",#
		      	paste(#
		      		variables[i],#
		      		"_mean_of_observed_means",#
		      		sep=""#
				)#
			)#
	}#
	Y <- Reduce(#
		function(x, y) merge(#
			x, y,#
			by=c(grouping.variables, "N.SRSWOR.plots")#
		),#
		A#
	)
A
setwd('/Users/KSauby/Documents/Projects/ACS/R')
grouping.variables
setwd('/Users/KSauby/Documents/Projects/ACS/R')
. <- NULL#
	X <- merge(population_data_summary, simulation_data, by=grouping.variables)#
	# number of simulations#
	n_sims <- X %>% #
		group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots")) %>%#
		summarise(n_sims = length(N.Total.plots))#
	X <- merge(X, n_sims, by=c(grouping.variables, "N.SRSWOR.plots"))#
	# mean of observed means	#
	X.grp <- X %>% group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots"))
setwd('/Users/KSauby/Documents/Projects/ACS/R')
. <- NULL#
	X <- merge(population_data_summary, simulation_data, by=grouping.variables)#
	# number of simulations#
	n_sims <- X %>% #
		group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots")) %>%#
		summarise(n_sims = length(N.Total.plots))#
	X <- merge(X, n_sims, by=c(grouping.variables, "N.SRSWOR.plots"))#
	# mean of observed means	#
	X.grp <- X %>% group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots", "n_sim"))
setwd('/Users/KSauby/Documents/Projects/ACS/R')
. <- NULL#
	X <- merge(population_data_summary, simulation_data, by=grouping.variables)#
	# number of simulations#
	n_sims <- X %>% #
		group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots")) %>%#
		summarise(n_sims = length(N.Total.plots))#
	X <- merge(X, n_sims, by=c(grouping.variables, "N.SRSWOR.plots"))#
	# mean of observed means	#
	X.grp <- X %>% group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))
setwd('/Users/KSauby/Documents/Projects/ACS/R')
for (i in 1:length(variables)) {#
		A[[i]] <- list()#
		A[[i]] <- X.grp %>%#
			summarise_(#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				)#
			) %>%#
			setnames(#
		      	.,#
		      	"var_mean_of_observed_means",#
		      	paste(#
		      		variables[i],#
		      		"_mean_of_observed_means",#
		      		sep=""#
				)#
			)#
	}
setwd('/Users/KSauby/Documents/Projects/ACS/R')
Y <- Reduce(#
		function(x, y) merge(#
			x, y,#
			by=c(grouping.variables, "N.SRSWOR.plots", "n_sims")#
		),#
		A#
	)
setwd('/Users/KSauby/Documents/Projects/ACS/R')
X <- merge(X, Y, by=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))
head(X)
setwd('/Users/KSauby/Documents/Projects/ACS/R')
. <- NULL#
	X <- merge(population_data_summary, simulation_data, by=grouping.variables)#
	# number of simulations#
	n_sims <- X %>% #
		group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots")) %>%#
		summarise(n_sims = length(N.Total.plots))#
	X <- merge(X, n_sims, by=c(grouping.variables, "N.SRSWOR.plots"))#
	# mean of observed means	#
	temp <- X %>% group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	for (i in 1:length(variables)) {#
		A[[i]] <- list()#
		A[[i]] <- temp %>%#
			summarise_(#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				)#
			) %>%#
			setnames(#
		      	.,#
		      	"var_mean_of_observed_means",#
		      	paste(#
		      		variables[i],#
		      		"_mean_of_observed_means",#
		      		sep=""#
				)#
			)#
	}#
	Y <- Reduce(#
		function(x, y) merge(#
			x, y,#
			by=c(grouping.variables, "N.SRSWOR.plots", "n_sims")#
		),#
		A#
	)				#
	X <- merge(X, Y, by=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	X.grp <- X %>% group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	# calculate squared differences for each simulation and variable#
	for (i in 1:length(variables)) {#
		for (j in 1:length(statistics)) {#
			X %<>%#
				mutate(#
					var_observed_minus_true = #
							# (observed -#
							eval(#
								parse(#
									text=paste(#
										"X$", #
										variables[i], #
										"_", #
										statistics[j], #
										"_observed", #
										sep=""#
									)#
								)#
							) - #
							# true)#
							eval(#
								parse(#
									text=paste(#
										"X$", #
										variables[i], #
										"_", #
										statistics[j], #
										sep=""#
									)#
								)#
							)#
				) %>%#
				setnames(#
					., #
					"var_observed_minus_true", #
					paste(#
						variables[i], #
						"_", #
						statistics[j], #
						"_observed_minus_true", #
						sep=""#
					)#
				)	#
			}#
	}
setwd('/Users/KSauby/Documents/Projects/ACS/R')
if (!(is.null(rvar))) {#
		for (i in 1:length(rvar)) {#
			for (j in 1:length(ratio.statistics)) {#
				X %<>%#
					mutate(#
						var_observed_minus_true = #
								# (observed -#
								eval(parse(text=paste(#
									"X$", #
									rvar[i],#
								 	"_", #
									ratio.statistics[j], #
									"_observed", #
									sep=""#
								))) - #
								# true)#
								eval(parse(text=paste(#
									"X$", #
									rvar[i], #
									"_ratio_", #
									ratio.statistics[j], #
									sep=""#
								)))#
					) %>%#
					setnames(#
						., #
						"var_observed_minus_true", #
						paste(#
							rvar[i], #
							"_", #
							ratio.statistics[j], #
							"_observed_minus_true", #
							sep=""#
						)#
					)#
			}#
		}#
	}
head(A)
head(X)
i
i=1
setwd('/Users/KSauby/Documents/Projects/ACS/R')
paste(#
									"X$", #
									variables[i], #
									"_mean_of_observed_means", #
									sep=""
)
setwd('/Users/KSauby/Documents/Projects/ACS/R')
eval(#
							parse(#
								paste(#
									"X$", #
									variables[i], #
									"_mean_of_observed_means", #
									sep=""#
								)#
							)#
						)
setwd('/Users/KSauby/Documents/Projects/ACS/R')
paste(#
									"X$", #
									variables[i], #
									"_mean_observed", #
									sep=""#
								)
setwd('/Users/KSauby/Documents/Projects/ACS/R')
paste(#
									"X$", #
									variables[i], #
									"_mean_of_observed_means", #
									sep=""#
								)
setwd('/Users/KSauby/Documents/Projects/ACS/R')
for (i in 1:length(variables)) {#
		X %<>%#
			mutate(#
				var_observed_minus_mean_of_observed_means = #
						# (observed -#
						eval(#
							parse(#
								paste(#
									"X$", #
									variables[i], #
									"_mean_observed", #
									sep=""#
								)#
							)#
						) - #
						# true)#
						eval(#
							parse(#
								paste(#
									"X$", #
									variables[i], #
									"_mean_of_observed_means", #
									sep=""#
								)#
							)#
						)#
			) %>%#
			setnames(#
				., #
				"var_observed_minus_mean_of_observed_means", #
				paste(#
					variables[i], #
					"_observed_minus_mean_of_observed_means", #
					sep=""#
				)#
			)	#
	}
setwd('/Users/KSauby/Documents/Projects/ACS/R')
for (i in 1:length(variables)) {#
		X %<>%#
			mutate(#
				var_observed_minus_mean_of_observed_means = #
						# (observed -#
						eval(#
							parse(#
								text = paste(#
									"X$", #
									variables[i], #
									"_mean_observed", #
									sep=""#
								)#
							)#
						) - #
						# true)#
						eval(#
							parse(#
								text = paste(#
									"X$", #
									variables[i], #
									"_mean_of_observed_means", #
									sep=""#
								)#
							)#
						)#
			) %>%#
			setnames(#
				., #
				"var_observed_minus_mean_of_observed_means", #
				paste(#
					variables[i], #
					"_observed_minus_mean_of_observed_means", #
					sep=""#
				)#
			)	#
	}
head(X)
setwd('/Users/KSauby/Documents/Projects/ACS/R')
paste(#
							variables[i],#
							"_observed_minus_mean_of_observed_means",#
							sep=""#
						)
setwd('/Users/KSauby/Documents/Projects/ACS/R')
. <- NULL#
	X <- merge(population_data_summary, simulation_data, by=grouping.variables)#
	# number of simulations#
	n_sims <- X %>% #
		group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots")) %>%#
		summarise(n_sims = length(N.Total.plots))#
	X <- merge(X, n_sims, by=c(grouping.variables, "N.SRSWOR.plots"))#
	# mean of observed means	#
	temp <- X %>% group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	for (i in 1:length(variables)) {#
		A[[i]] <- list()#
		A[[i]] <- temp %>%#
			summarise_(#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				)#
			) %>%#
			setnames(#
		      	.,#
		      	"var_mean_of_observed_means",#
		      	paste(#
		      		variables[i],#
		      		"_mean_of_observed_means",#
		      		sep=""#
				)#
			)#
	}#
	Y <- Reduce(#
		function(x, y) merge(#
			x, y,#
			by=c(grouping.variables, "N.SRSWOR.plots", "n_sims")#
		),#
		A#
	)				#
	X <- merge(X, Y, by=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	X.grp <- X %>% group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	# calculate squared differences for each simulation and variable#
	for (i in 1:length(variables)) {#
		for (j in 1:length(statistics)) {#
			X %<>%#
				mutate(#
					var_observed_minus_true = #
							# (observed -#
							eval(#
								parse(#
									text=paste(#
										"X$", #
										variables[i], #
										"_", #
										statistics[j], #
										"_observed", #
										sep=""#
									)#
								)#
							) - #
							# true)#
							eval(#
								parse(#
									text=paste(#
										"X$", #
										variables[i], #
										"_", #
										statistics[j], #
										sep=""#
									)#
								)#
							)#
				) %>%#
				setnames(#
					., #
					"var_observed_minus_true", #
					paste(#
						variables[i], #
						"_", #
						statistics[j], #
						"_observed_minus_true", #
						sep=""#
					)#
				)	#
		}#
	}#
	if (!(is.null(rvar))) {#
		for (i in 1:length(rvar)) {#
			for (j in 1:length(ratio.statistics)) {#
				X %<>%#
					mutate(#
						var_observed_minus_true = #
								# (observed -#
								eval(parse(text=paste(#
									"X$", #
									rvar[i],#
								 	"_", #
									ratio.statistics[j], #
									"_observed", #
									sep=""#
								))) - #
								# true)#
								eval(parse(text=paste(#
									"X$", #
									rvar[i], #
									"_ratio_", #
									ratio.statistics[j], #
									sep=""#
								)))#
					) %>%#
					setnames(#
						., #
						"var_observed_minus_true", #
						paste(#
							rvar[i], #
							"_", #
							ratio.statistics[j], #
							"_observed_minus_true", #
							sep=""#
						)#
					)#
			}#
		}#
	}
setwd('/Users/KSauby/Documents/Projects/ACS/R')
for (i in 1:length(variables)) {#
		X %<>%#
			mutate(#
				var_observed_minus_mean_of_observed_means = #
						# (observed -#
						eval(#
							parse(#
								text = paste(#
									"X$", #
									variables[i], #
									"_mean_observed", #
									sep=""#
								)#
							)#
						) - #
						# true)#
						eval(#
							parse(#
								text = paste(#
									"X$", #
									variables[i], #
									"_mean_of_observed_means", #
									sep=""#
								)#
							)#
						)#
			) %>%#
			setnames(#
				., #
				"var_observed_minus_mean_of_observed_means", #
				paste(#
					variables[i], #
					"_observed_minus_mean_of_observed_means", #
					sep=""#
				)#
			)	#
	}#
	if (!(is.null(rvar))) {#
		for (i in 1:length(rvar)) {#
			X %<>%#
				mutate(#
					var_observed_minus_mean_of_observed_means = #
							# (observed -#
							eval(#
								parse(#
									text = paste(#
										"X$", #
										rvar[i], #
										"_mean_observed", #
										sep=""#
									)#
								)#
							) - #
							# true)#
							eval(#
								parse(#
									text = paste(#
										"X$", #
										rvar[i], #
										"_mean_of_observed_means", #
										sep=""#
									)#
								)#
							)#
				) %>%#
				setnames(#
					., #
					"var_observed_minus_mean_of_observed_means", #
					paste(#
						rvar[i], #
						"_observed_minus_mean_of_observed_means", #
						sep=""#
					)#
				)	#
			}#
		}#
	}
setwd('/Users/KSauby/Documents/Projects/ACS/R')
for (i in 1:length(variables)) {#
		X %<>%#
			mutate(#
				var_observed_minus_mean_of_observed_means = #
						# (observed -#
						eval(#
							parse(#
								text = paste(#
									"X$", #
									variables[i], #
									"_mean_observed", #
									sep=""#
								)#
							)#
						) - #
						# true)#
						eval(#
							parse(#
								text = paste(#
									"X$", #
									variables[i], #
									"_mean_of_observed_means", #
									sep=""#
								)#
							)#
						)#
			) %>%#
			setnames(#
				., #
				"var_observed_minus_mean_of_observed_means", #
				paste(#
					variables[i], #
					"_observed_minus_mean_of_observed_means", #
					sep=""#
				)#
			)	#
	}
setwd('/Users/KSauby/Documents/Projects/ACS/R')
paste(#
					variables[i], #
					"_observed_minus_mean_of_observed_means", #
					sep=""#
				)
setwd('/Users/KSauby/Documents/Projects/ACS/R')
. <- NULL#
	X <- merge(population_data_summary, simulation_data, by=grouping.variables)#
	# number of simulations#
	n_sims <- X %>% #
		group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots")) %>%#
		summarise(n_sims = length(N.Total.plots))#
	X <- merge(X, n_sims, by=c(grouping.variables, "N.SRSWOR.plots"))#
	# mean of observed means	#
	temp <- X %>% group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	for (i in 1:length(variables)) {#
		A[[i]] <- list()#
		A[[i]] <- temp %>%#
			summarise_(#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				)#
			) %>%#
			setnames(#
		      	.,#
		      	"var_mean_of_observed_means",#
		      	paste(#
		      		variables[i],#
		      		"_mean_of_observed_means",#
		      		sep=""#
				)#
			)#
	}#
	Y <- Reduce(#
		function(x, y) merge(#
			x, y,#
			by=c(grouping.variables, "N.SRSWOR.plots", "n_sims")#
		),#
		A#
	)				#
	X <- merge(X, Y, by=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	X.grp <- X %>% group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	# calculate squared differences for each simulation and variable#
	for (i in 1:length(variables)) {#
		for (j in 1:length(statistics)) {#
			X %<>%#
				mutate(#
					var_observed_minus_true = #
							# (observed -#
							eval(#
								parse(#
									text=paste(#
										"X$", #
										variables[i], #
										"_", #
										statistics[j], #
										"_observed", #
										sep=""#
									)#
								)#
							) - #
							# true)#
							eval(#
								parse(#
									text=paste(#
										"X$", #
										variables[i], #
										"_", #
										statistics[j], #
										sep=""#
									)#
								)#
							)#
				) %>%#
				setnames(#
					., #
					"var_observed_minus_true", #
					paste(#
						variables[i], #
						"_", #
						statistics[j], #
						"_observed_minus_true", #
						sep=""#
					)#
				)	#
		}#
	}#
	if (!(is.null(rvar))) {#
		for (i in 1:length(rvar)) {#
			for (j in 1:length(ratio.statistics)) {#
				X %<>%#
					mutate(#
						var_observed_minus_true = #
								# (observed -#
								eval(parse(text=paste(#
									"X$", #
									rvar[i],#
								 	"_", #
									ratio.statistics[j], #
									"_observed", #
									sep=""#
								))) - #
								# true)#
								eval(parse(text=paste(#
									"X$", #
									rvar[i], #
									"_ratio_", #
									ratio.statistics[j], #
									sep=""#
								)))#
					) %>%#
					setnames(#
						., #
						"var_observed_minus_true", #
						paste(#
							rvar[i], #
							"_", #
							ratio.statistics[j], #
							"_observed_minus_true", #
							sep=""#
						)#
					)#
			}#
		}#
	}#
	# calculate squared differences (observed - mean of observed) for each variable
setwd('/Users/KSauby/Documents/Projects/ACS/R')
paste(#
									"X$", #
									variables[i], #
									"_mean_observed", #
									sep=""#
								)
i=1
setwd('/Users/KSauby/Documents/Projects/ACS/R')
paste(#
									"X$", #
									variables[i], #
									"_mean_observed", #
									sep=""#
								)
setwd('/Users/KSauby/Documents/Projects/ACS/R')
paste(#
									"X$", #
									variables[i], #
									"_mean_of_observed_means", #
									sep=""#
								)
head(_observed_minus_mean_of_observed_means)
setwd('/Users/KSauby/Documents/Projects/ACS/R')
paste(#
					variables[i], #
					"_observed_minus_mean_of_observed_means", #
					sep=""#
				)
setwd('/Users/KSauby/Documents/Projects/ACS/R')
. <- NULL#
	X <- merge(population_data_summary, simulation_data, by=grouping.variables)#
	# number of simulations#
	n_sims <- X %>% #
		group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots")) %>%#
		summarise(n_sims = length(N.Total.plots))#
	X <- merge(X, n_sims, by=c(grouping.variables, "N.SRSWOR.plots"))#
	# mean of observed means	#
	temp <- X %>% group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	for (i in 1:length(variables)) {#
		A[[i]] <- list()#
		A[[i]] <- temp %>%#
			summarise_(#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				)#
			) %>%#
			setnames(#
		      	.,#
		      	"var_mean_of_observed_means",#
		      	paste(#
		      		variables[i],#
		      		"_mean_of_observed_means",#
		      		sep=""#
				)#
			)#
	}#
	Y <- Reduce(#
		function(x, y) merge(#
			x, y,#
			by=c(grouping.variables, "N.SRSWOR.plots", "n_sims")#
		),#
		A#
	)				#
	X <- merge(X, Y, by=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	X.grp <- X %>% group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	# calculate squared differences for each simulation and variable#
	for (i in 1:length(variables)) {#
		for (j in 1:length(statistics)) {#
			X %<>%#
				mutate(#
					var_observed_minus_true = #
							# (observed -#
							eval(#
								parse(#
									text=paste(#
										"X$", #
										variables[i], #
										"_", #
										statistics[j], #
										"_observed", #
										sep=""#
									)#
								)#
							) - #
							# true)#
							eval(#
								parse(#
									text=paste(#
										"X$", #
										variables[i], #
										"_", #
										statistics[j], #
										sep=""#
									)#
								)#
							)#
				) %>%#
				setnames(#
					., #
					"var_observed_minus_true", #
					paste(#
						variables[i], #
						"_", #
						statistics[j], #
						"_observed_minus_true", #
						sep=""#
					)#
				)	#
		}#
	}#
	if (!(is.null(rvar))) {#
		for (i in 1:length(rvar)) {#
			for (j in 1:length(ratio.statistics)) {#
				X %<>%#
					mutate(#
						var_observed_minus_true = #
								# (observed -#
								eval(parse(text=paste(#
									"X$", #
									rvar[i],#
								 	"_", #
									ratio.statistics[j], #
									"_observed", #
									sep=""#
								))) - #
								# true)#
								eval(parse(text=paste(#
									"X$", #
									rvar[i], #
									"_ratio_", #
									ratio.statistics[j], #
									sep=""#
								)))#
					) %>%#
					setnames(#
						., #
						"var_observed_minus_true", #
						paste(#
							rvar[i], #
							"_", #
							ratio.statistics[j], #
							"_observed_minus_true", #
							sep=""#
						)#
					)#
			}#
		}#
	}#
	# calculate squared differences (observed - mean of observed) for each variable
head(X)
i
i=1
setwd('/Users/KSauby/Documents/Projects/ACS/R')
X %<>%#
			mutate(#
				var_observed_minus_mean_of_observed_means = #
						# (observed -#
						eval(#
							parse(#
								text = paste(#
									"X$", #
									variables[i], #
									"_mean_observed", #
									sep=""#
								)#
							)#
						) - #
						# true)#
						eval(#
							parse(#
								text = paste(#
									"X$", #
									variables[i], #
									"_mean_of_observed_means", #
									sep=""#
								)#
							)#
						)#
			)
head(X)
setwd('/Users/KSauby/Documents/Projects/ACS/R')
X %<>%#
			mutate(#
				var_observed_minus_mean_of_observed_means = #
						# (observed -#
						eval(#
							parse(#
								text = paste(#
									"X$", #
									variables[i], #
									"_mean_observed", #
									sep=""#
								)#
							)#
						) - #
						# true)#
						eval(#
							parse(#
								text = paste(#
									"X$", #
									variables[i], #
									"_mean_of_observed_means", #
									sep=""#
								)#
							)#
						)#
			) %>%#
			setnames(#
				., #
				"var_observed_minus_mean_of_observed_means", #
				paste(#
					variables[i], #
					"_observed_minus_mean_of_observed_means", #
					sep=""#
				)#
			)
head(X)
i=2
setwd('/Users/KSauby/Documents/Projects/ACS/R')
X %<>%#
			mutate(#
				var_observed_minus_mean_of_observed_means = #
						# (observed -#
						eval(#
							parse(#
								text = paste(#
									"X$", #
									variables[i], #
									"_mean_observed", #
									sep=""#
								)#
							)#
						) - #
						# true)#
						eval(#
							parse(#
								text = paste(#
									"X$", #
									variables[i], #
									"_mean_of_observed_means", #
									sep=""#
								)#
							)#
						)#
			) %>%#
			setnames(#
				., #
				"var_observed_minus_mean_of_observed_means", #
				paste(#
					variables[i], #
					"_observed_minus_mean_of_observed_means", #
					sep=""#
				)#
			)
head(X)
setwd('/Users/KSauby/Documents/Projects/ACS/R')
X %<>%#
			mutate(#
				var_observed_minus_mean_of_observed_means = #
						# (observed -#
						eval(#
							parse(#
								text = paste(#
									"X$", #
									variables[i], #
									"_mean_observed", #
									sep=""#
								)#
							)#
						) - #
						# true)#
						eval(#
							parse(#
								text = paste(#
									"X$", #
									variables[i], #
									"_mean_of_observed_means", #
									sep=""#
								)#
							)#
						)#
			) %>%#
			setnames(#
				., #
				"var_observed_minus_mean_of_observed_means", #
				paste(#
					variables[i], #
					"_observed_minus_mean_of_observed_means", #
					sep=""#
				)#
			)
i=3
setwd('/Users/KSauby/Documents/Projects/ACS/R')
X %<>%#
			mutate(#
				var_observed_minus_mean_of_observed_means = #
						# (observed -#
						eval(#
							parse(#
								text = paste(#
									"X$", #
									variables[i], #
									"_mean_observed", #
									sep=""#
								)#
							)#
						) - #
						# true)#
						eval(#
							parse(#
								text = paste(#
									"X$", #
									variables[i], #
									"_mean_of_observed_means", #
									sep=""#
								)#
							)#
						)#
			) %>%#
			setnames(#
				., #
				"var_observed_minus_mean_of_observed_means", #
				paste(#
					variables[i], #
					"_observed_minus_mean_of_observed_means", #
					sep=""#
				)#
			)
setwd('/Users/KSauby/Documents/Projects/ACS/R')
. <- NULL#
	X <- merge(population_data_summary, simulation_data, by=grouping.variables)#
	# number of simulations#
	n_sims <- X %>% #
		group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots")) %>%#
		summarise(n_sims = length(N.Total.plots))#
	X <- merge(X, n_sims, by=c(grouping.variables, "N.SRSWOR.plots"))#
	# mean of observed means	#
	temp <- X %>% group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	for (i in 1:length(variables)) {#
		A[[i]] <- list()#
		A[[i]] <- temp %>%#
			summarise_(#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				)#
			) %>%#
			setnames(#
		      	.,#
		      	"var_mean_of_observed_means",#
		      	paste(#
		      		variables[i],#
		      		"_mean_of_observed_means",#
		      		sep=""#
				)#
			)#
	}#
	Y <- Reduce(#
		function(x, y) merge(#
			x, y,#
			by=c(grouping.variables, "N.SRSWOR.plots", "n_sims")#
		),#
		A#
	)				#
	X <- merge(X, Y, by=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	X.grp <- X %>% group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	# calculate squared differences for each simulation and variable#
	for (i in 1:length(variables)) {#
		for (j in 1:length(statistics)) {#
			X %<>%#
				mutate(#
					var_observed_minus_true = #
							# (observed -#
							eval(#
								parse(#
									text=paste(#
										"X$", #
										variables[i], #
										"_", #
										statistics[j], #
										"_observed", #
										sep=""#
									)#
								)#
							) - #
							# true)#
							eval(#
								parse(#
									text=paste(#
										"X$", #
										variables[i], #
										"_", #
										statistics[j], #
										sep=""#
									)#
								)#
							)#
				) %>%#
				setnames(#
					., #
					"var_observed_minus_true", #
					paste(#
						variables[i], #
						"_", #
						statistics[j], #
						"_observed_minus_true", #
						sep=""#
					)#
				)	#
		}#
	}#
	if (!(is.null(rvar))) {#
		for (i in 1:length(rvar)) {#
			for (j in 1:length(ratio.statistics)) {#
				X %<>%#
					mutate(#
						var_observed_minus_true = #
								# (observed -#
								eval(parse(text=paste(#
									"X$", #
									rvar[i],#
								 	"_", #
									ratio.statistics[j], #
									"_observed", #
									sep=""#
								))) - #
								# true)#
								eval(parse(text=paste(#
									"X$", #
									rvar[i], #
									"_ratio_", #
									ratio.statistics[j], #
									sep=""#
								)))#
					) %>%#
					setnames(#
						., #
						"var_observed_minus_true", #
						paste(#
							rvar[i], #
							"_", #
							ratio.statistics[j], #
							"_observed_minus_true", #
							sep=""#
						)#
					)#
			}#
		}#
	}#
	# calculate squared differences (observed - mean of observed) for each variable#
	for (i in 1:length(variables)) {#
		X %<>%#
			mutate(#
				var_observed_minus_mean_of_observed_means = #
						# (observed -#
						eval(#
							parse(#
								text = paste(#
									"X$", #
									variables[i], #
									"_mean_observed", #
									sep=""#
								)#
							)#
						) - #
						# true)#
						eval(#
							parse(#
								text = paste(#
									"X$", #
									variables[i], #
									"_mean_of_observed_means", #
									sep=""#
								)#
							)#
						)#
			) %>%#
			setnames(#
				., #
				"var_observed_minus_mean_of_observed_means", #
				paste(#
					variables[i], #
					"_observed_minus_mean_of_observed_means", #
					sep=""#
				)#
			)	#
	}
setwd('/Users/KSauby/Documents/Projects/ACS/R')
if (!(is.null(rvar))) {#
		for (i in 1:length(rvar)) {#
			X %<>%#
				mutate(#
					var_observed_minus_mean_of_observed_means = #
							# (observed -#
							eval(#
								parse(#
									text = paste(#
										"X$", #
										rvar[i], #
										"_mean_observed", #
										sep=""#
									)#
								)#
							) - #
							# true)#
							eval(#
								parse(#
									text = paste(#
										"X$", #
										rvar[i], #
										"_mean_of_observed_means", #
										sep=""#
									)#
								)#
							)#
				) %>%#
				setnames(#
					., #
					"var_observed_minus_mean_of_observed_means", #
					paste(#
						rvar[i], #
						"_observed_minus_mean_of_observed_means", #
						sep=""#
					)#
				)	#
			}#
		}#
	}
setwd('/Users/KSauby/Documents/Projects/ACS/R')
!(is.null(rvar))
setwd('/Users/KSauby/Documents/Projects/ACS/R')
rvar
setwd('/Users/KSauby/Documents/Projects/ACS/R')
rvar[i]
setwd('/Users/KSauby/Documents/Projects/ACS/R')
paste(#
										"X$", #
										rvar[i], #
										"_mean_observed", #
										sep=""#
									)
setwd('/Users/KSauby/Documents/Projects/ACS/R')
paste(#
						rvar[i], #
						"_observed_minus_mean_of_observed_means", #
						sep=""#
					)
setwd('/Users/KSauby/Documents/Projects/ACS/R')
paste(#
										"X$", #
										rvar[i], #
										"_mean_of_observed_means", #
										sep=""#
									)
head(X)
setwd('/Users/KSauby/Documents/Projects/ACS/R')
. <- NULL#
	X <- merge(population_data_summary, simulation_data, by=grouping.variables)#
	# number of simulations#
	n_sims <- X %>% #
		group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots")) %>%#
		summarise(n_sims = length(N.Total.plots))#
	X <- merge(X, n_sims, by=c(grouping.variables, "N.SRSWOR.plots"))#
	# mean of observed means	#
	temp <- X %>% group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	for (i in 1:length(variables)) {#
		A[[i]] <- list()#
		A[[i]] <- temp %>%#
			summarise_(#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				)#
			) %>%#
			setnames(#
		      	.,#
		      	"var_mean_of_observed_means",#
		      	paste(#
		      		variables[i],#
		      		"_mean_of_observed_means",#
		      		sep=""#
				)#
			)#
	}#
	Y <- Reduce(#
		function(x, y) merge(#
			x, y,#
			by=c(grouping.variables, "N.SRSWOR.plots", "n_sims")#
		),#
		A#
	)#
	if (!(is.null(rvar))) {#
		for (i in 1:length(variables)) {#
			A[[i]] <- list()#
			A[[i]] <- temp %>%#
				summarise_(#
					var_mean_of_observed_means = interp(#
						~mean(var, na.rm = TRUE), #
						var = #
						as.name(#
							paste(#
								rvar[i],#
								"_mean_observed",#
								sep=""#
							)#
						)#
					)#
				) %>%#
				setnames(#
			      	.,#
			      	"var_mean_of_observed_means",#
			      	paste(#
			      		rvar[i],#
			      		"_mean_of_observed_means",#
			      		sep=""#
					)#
				)#
		}#
		Z <- Reduce(#
			function(x, y) merge(#
				x, y,#
				by=c(grouping.variables, "N.SRSWOR.plots", "n_sims")#
			),#
			Y#
		)#
		Y <- Z#
	}#
	X <- merge(X, Y, by=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	X.grp <- X %>% group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	# calculate squared differences for each simulation and variable#
	for (i in 1:length(variables)) {#
		for (j in 1:length(statistics)) {#
			X %<>%#
				mutate(#
					var_observed_minus_true = #
							# (observed -#
							eval(#
								parse(#
									text=paste(#
										"X$", #
										variables[i], #
										"_", #
										statistics[j], #
										"_observed", #
										sep=""#
									)#
								)#
							) - #
							# true)#
							eval(#
								parse(#
									text=paste(#
										"X$", #
										variables[i], #
										"_", #
										statistics[j], #
										sep=""#
									)#
								)#
							)#
				) %>%#
				setnames(#
					., #
					"var_observed_minus_true", #
					paste(#
						variables[i], #
						"_", #
						statistics[j], #
						"_observed_minus_true", #
						sep=""#
					)#
				)	#
		}#
	}#
	if (!(is.null(rvar))) {#
		for (i in 1:length(rvar)) {#
			for (j in 1:length(ratio.statistics)) {#
				X %<>%#
					mutate(#
						var_observed_minus_true = #
								# (observed -#
								eval(parse(text=paste(#
									"X$", #
									rvar[i],#
								 	"_", #
									ratio.statistics[j], #
									"_observed", #
									sep=""#
								))) - #
								# true)#
								eval(parse(text=paste(#
									"X$", #
									rvar[i], #
									"_ratio_", #
									ratio.statistics[j], #
									sep=""#
								)))#
					) %>%#
					setnames(#
						., #
						"var_observed_minus_true", #
						paste(#
							rvar[i], #
							"_", #
							ratio.statistics[j], #
							"_observed_minus_true", #
							sep=""#
						)#
					)#
			}#
		}#
	}
setwd('/Users/KSauby/Documents/Projects/ACS/R')
. <- NULL#
	X <- merge(population_data_summary, simulation_data, by=grouping.variables)#
	# number of simulations#
	n_sims <- X %>% #
		group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots")) %>%#
		summarise(n_sims = length(N.Total.plots))#
	X <- merge(X, n_sims, by=c(grouping.variables, "N.SRSWOR.plots"))
setwd('/Users/KSauby/Documents/Projects/ACS/R')
temp <- X %>% group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	for (i in 1:length(variables)) {#
		A[[i]] <- list()#
		A[[i]] <- temp %>%#
			summarise_(#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				)#
			) %>%#
			setnames(#
		      	.,#
		      	"var_mean_of_observed_means",#
		      	paste(#
		      		variables[i],#
		      		"_mean_of_observed_means",#
		      		sep=""#
				)#
			)#
	}#
	Y <- Reduce(#
		function(x, y) merge(#
			x, y,#
			by=c(grouping.variables, "N.SRSWOR.plots", "n_sims")#
		),#
		A#
	)
setwd('/Users/KSauby/Documents/Projects/ACS/R')
if (!(is.null(rvar))) {#
		for (i in 1:length(variables)) {#
			A[[i]] <- list()#
			A[[i]] <- temp %>%#
				summarise_(#
					var_mean_of_observed_means = interp(#
						~mean(var, na.rm = TRUE), #
						var = #
						as.name(#
							paste(#
								rvar[i],#
								"_mean_observed",#
								sep=""#
							)#
						)#
					)#
				) %>%#
				setnames(#
			      	.,#
			      	"var_mean_of_observed_means",#
			      	paste(#
			      		rvar[i],#
			      		"_mean_of_observed_means",#
			      		sep=""#
					)#
				)#
		}#
		Z <- Reduce(#
			function(x, y) merge(#
				x, y,#
				by=c(grouping.variables, "N.SRSWOR.plots", "n_sims")#
			),#
			Y#
		)#
		Y <- Z#
	}
setwd('/Users/KSauby/Documents/Projects/ACS/R')
. <- NULL#
	X <- merge(population_data_summary, simulation_data, by=grouping.variables)#
	# number of simulations#
	n_sims <- X %>% #
		group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots")) %>%#
		summarise(n_sims = length(N.Total.plots))#
	X <- merge(X, n_sims, by=c(grouping.variables, "N.SRSWOR.plots"))#
	# mean of observed means	#
	temp <- X %>% group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	A <- vector("list", length(variables))#
	for (i in 1:length(variables)) {#
		A[[i]] <- list()#
		A[[i]] <- temp %>%#
			summarise_(#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				)#
			) %>%#
			setnames(#
		      	.,#
		      	"var_mean_of_observed_means",#
		      	paste(#
		      		variables[i],#
		      		"_mean_of_observed_means",#
		      		sep=""#
				)#
			)#
	}#
	Y <- Reduce(#
		function(x, y) merge(#
			x, y,#
			by=c(grouping.variables, "N.SRSWOR.plots", "n_sims")#
		),#
		A#
	)
head(Y)
setwd('/Users/KSauby/Documents/Projects/ACS/R')
for (i in 1:length(variables)) {#
			A[[i]] <- list()#
			A[[i]] <- temp %>%#
				summarise_(#
					var_mean_of_observed_means = interp(#
						~mean(var, na.rm = TRUE), #
						var = #
						as.name(#
							paste(#
								rvar[i],#
								"_mean_observed",#
								sep=""#
							)#
						)#
					)#
				) %>%#
				setnames(#
			      	.,#
			      	"var_mean_of_observed_means",#
			      	paste(#
			      		rvar[i],#
			      		"_mean_of_observed_means",#
			      		sep=""#
					)#
				)#
		}
setwd('/Users/KSauby/Documents/Projects/ACS/R')
Y <- Reduce(#
			function(x, y) merge(#
				x, y,#
				by=c(grouping.variables, "N.SRSWOR.plots", "n_sims")#
			),#
			A#
		)
head(Y)
setwd('/Users/KSauby/Documents/Projects/ACS/R')
for (i in 1:length(variables)) {#
			A[[i]] <- list()#
			A[[i]] <- temp %>%#
				summarise_(#
					var_mean_of_observed_means = interp(#
						~mean(var, na.rm = TRUE), #
						var = #
						as.name(#
							paste(#
								rvar[i],#
								"_mean_observed",#
								sep=""#
							)#
						)#
					)#
				) %>%#
				setnames(#
			      	.,#
			      	"var_mean_of_observed_means",#
			      	paste(#
			      		rvar[i],#
			      		"_mean_of_observed_means",#
			      		sep=""#
					)#
				)#
		}#
		Z <- Reduce(#
			function(x, y) merge(#
				x, y,#
				by=c(grouping.variables, "N.SRSWOR.plots", "n_sims")#
			),#
			A#
		)#
		Y <- merge(#
			Y, Z,#
			by=c(grouping.variables, "N.SRSWOR.plots", "n_sims")#
		)
head(Y)
setwd('/Users/KSauby/Documents/Projects/ACS/R')
. <- NULL#
	X <- merge(population_data_summary, simulation_data, by=grouping.variables)#
	# number of simulations#
	n_sims <- X %>% #
		group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots")) %>%#
		summarise(n_sims = length(N.Total.plots))#
	X <- merge(X, n_sims, by=c(grouping.variables, "N.SRSWOR.plots"))#
	# mean of observed means	#
	temp <- X %>% group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	A <- vector("list", length(variables))#
	for (i in 1:length(variables)) {#
		A[[i]] <- list()#
		A[[i]] <- temp %>%#
			summarise_(#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				)#
			) %>%#
			setnames(#
		      	.,#
		      	"var_mean_of_observed_means",#
		      	paste(#
		      		variables[i],#
		      		"_mean_of_observed_means",#
		      		sep=""#
				)#
			)#
	}#
	Y <- Reduce(#
		function(x, y) merge(#
			x, y,#
			by=c(grouping.variables, "N.SRSWOR.plots", "n_sims")#
		),#
		A#
	)#
	if (!(is.null(rvar))) {#
		for (i in 1:length(variables)) {#
			A[[i]] <- list()#
			A[[i]] <- temp %>%#
				summarise_(#
					var_mean_of_observed_means = interp(#
						~mean(var, na.rm = TRUE), #
						var = #
						as.name(#
							paste(#
								rvar[i],#
								"_mean_observed",#
								sep=""#
							)#
						)#
					)#
				) %>%#
				setnames(#
			      	.,#
			      	"var_mean_of_observed_means",#
			      	paste(#
			      		rvar[i],#
			      		"_mean_of_observed_means",#
			      		sep=""#
					)#
				)#
		}#
		Z <- Reduce(#
			function(x, y) merge(#
				x, y,#
				by=c(grouping.variables, "N.SRSWOR.plots", "n_sims")#
			),#
			A#
		)#
		Y <- merge(#
			Y, Z,#
			by=c(grouping.variables, "N.SRSWOR.plots", "n_sims")#
		)
}
head(Y)
setwd('/Users/KSauby/Documents/Projects/ACS/R')
X <- merge(X, Y, by=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	X.grp <- X %>% group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	# calculate squared differences for each simulation and variable#
	for (i in 1:length(variables)) {#
		for (j in 1:length(statistics)) {#
			X %<>%#
				mutate(#
					var_observed_minus_true = #
							# (observed -#
							eval(#
								parse(#
									text=paste(#
										"X$", #
										variables[i], #
										"_", #
										statistics[j], #
										"_observed", #
										sep=""#
									)#
								)#
							) - #
							# true)#
							eval(#
								parse(#
									text=paste(#
										"X$", #
										variables[i], #
										"_", #
										statistics[j], #
										sep=""#
									)#
								)#
							)#
				) %>%#
				setnames(#
					., #
					"var_observed_minus_true", #
					paste(#
						variables[i], #
						"_", #
						statistics[j], #
						"_observed_minus_true", #
						sep=""#
					)#
				)	#
		}#
	}#
	if (!(is.null(rvar))) {#
		for (i in 1:length(rvar)) {#
			for (j in 1:length(ratio.statistics)) {#
				X %<>%#
					mutate(#
						var_observed_minus_true = #
								# (observed -#
								eval(parse(text=paste(#
									"X$", #
									rvar[i],#
								 	"_", #
									ratio.statistics[j], #
									"_observed", #
									sep=""#
								))) - #
								# true)#
								eval(parse(text=paste(#
									"X$", #
									rvar[i], #
									"_ratio_", #
									ratio.statistics[j], #
									sep=""#
								)))#
					) %>%#
					setnames(#
						., #
						"var_observed_minus_true", #
						paste(#
							rvar[i], #
							"_", #
							ratio.statistics[j], #
							"_observed_minus_true", #
							sep=""#
						)#
					)#
			}#
		}#
	}
setwd('/Users/KSauby/Documents/Projects/ACS/R')
for (i in 1:length(variables)) {#
		X %<>%#
			mutate(#
				var_observed_minus_mean_of_observed_means = #
						# (observed -#
						eval(#
							parse(#
								text = paste(#
									"X$", #
									variables[i], #
									"_mean_observed", #
									sep=""#
								)#
							)#
						) - #
						# true)#
						eval(#
							parse(#
								text = paste(#
									"X$", #
									variables[i], #
									"_mean_of_observed_means", #
									sep=""#
								)#
							)#
						)#
			) %>%#
			setnames(#
				., #
				"var_observed_minus_mean_of_observed_means", #
				paste(#
					variables[i], #
					"_observed_minus_mean_of_observed_means", #
					sep=""#
				)#
			)	#
	}
setwd('/Users/KSauby/Documents/Projects/ACS/R')
if (!(is.null(rvar))) {#
		for (i in 1:length(rvar)) {#
			X %<>%#
				mutate(#
					var_observed_minus_mean_of_observed_means = #
							# (observed -#
							eval(#
								parse(#
									text = paste(#
										"X$", #
										rvar[i], #
										"_mean_observed", #
										sep=""#
									)#
								)#
							) - #
							# true)#
							eval(#
								parse(#
									text = paste(#
										"X$", #
										rvar[i], #
										"_mean_of_observed_means", #
										sep=""#
									)#
								)#
							)#
				) %>%#
				setnames(#
					., #
					"var_observed_minus_mean_of_observed_means", #
					paste(#
						rvar[i], #
						"_observed_minus_mean_of_observed_means", #
						sep=""#
					)#
				)	#
			}#
		}#
	}
i
setwd('/Users/KSauby/Documents/Projects/ACS/R')
rvar
setwd('/Users/KSauby/Documents/Projects/ACS/R')
. <- NULL#
	X <- merge(population_data_summary, simulation_data, by=grouping.variables)#
	# number of simulations#
	n_sims <- X %>% #
		group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots")) %>%#
		summarise(n_sims = length(N.Total.plots))#
	X <- merge(X, n_sims, by=c(grouping.variables, "N.SRSWOR.plots"))#
	# mean of observed means	#
	temp <- X %>% group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	A <- vector("list", length(variables))#
	for (i in 1:length(variables)) {#
		A[[i]] <- list()#
		A[[i]] <- temp %>%#
			summarise_(#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				)#
			) %>%#
			setnames(#
		      	.,#
		      	"var_mean_of_observed_means",#
		      	paste(#
		      		variables[i],#
		      		"_mean_of_observed_means",#
		      		sep=""#
				)#
			)#
	}#
	Y <- Reduce(#
		function(x, y) merge(#
			x, y,#
			by=c(grouping.variables, "N.SRSWOR.plots", "n_sims")#
		),#
		A#
	)#
	if (!(is.null(rvar))) {#
		for (i in 1:length(rvar)) {#
			A[[i]] <- list()#
			A[[i]] <- temp %>%#
				summarise_(#
					var_mean_of_observed_means = interp(#
						~mean(var, na.rm = TRUE), #
						var = #
						as.name(#
							paste(#
								rvar[i],#
								"_mean_observed",#
								sep=""#
							)#
						)#
					)#
				) %>%#
				setnames(#
			      	.,#
			      	"var_mean_of_observed_means",#
			      	paste(#
			      		rvar[i],#
			      		"_mean_of_observed_means",#
			      		sep=""#
					)#
				)#
		}#
		Z <- Reduce(#
			function(x, y) merge(#
				x, y,#
				by=c(grouping.variables, "N.SRSWOR.plots", "n_sims")#
			),#
			A#
		)#
		Y <- merge(#
			Y, Z,#
			by=c(grouping.variables, "N.SRSWOR.plots", "n_sims")#
		)#
	}#
	X <- merge(X, Y, by=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	X.grp <- X %>% group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	# calculate squared differences for each simulation and variable#
	for (i in 1:length(variables)) {#
		for (j in 1:length(statistics)) {#
			X %<>%#
				mutate(#
					var_observed_minus_true = #
							# (observed -#
							eval(#
								parse(#
									text=paste(#
										"X$", #
										variables[i], #
										"_", #
										statistics[j], #
										"_observed", #
										sep=""#
									)#
								)#
							) - #
							# true)#
							eval(#
								parse(#
									text=paste(#
										"X$", #
										variables[i], #
										"_", #
										statistics[j], #
										sep=""#
									)#
								)#
							)#
				) %>%#
				setnames(#
					., #
					"var_observed_minus_true", #
					paste(#
						variables[i], #
						"_", #
						statistics[j], #
						"_observed_minus_true", #
						sep=""#
					)#
				)	#
		}#
	}#
	if (!(is.null(rvar))) {#
		for (i in 1:length(rvar)) {#
			for (j in 1:length(ratio.statistics)) {#
				X %<>%#
					mutate(#
						var_observed_minus_true = #
								# (observed -#
								eval(parse(text=paste(#
									"X$", #
									rvar[i],#
								 	"_", #
									ratio.statistics[j], #
									"_observed", #
									sep=""#
								))) - #
								# true)#
								eval(parse(text=paste(#
									"X$", #
									rvar[i], #
									"_ratio_", #
									ratio.statistics[j], #
									sep=""#
								)))#
					) %>%#
					setnames(#
						., #
						"var_observed_minus_true", #
						paste(#
							rvar[i], #
							"_", #
							ratio.statistics[j], #
							"_observed_minus_true", #
							sep=""#
						)#
					)#
			}#
		}#
	}#
	# calculate squared differences (observed - mean of observed) for each variable
setwd('/Users/KSauby/Documents/Projects/ACS/R')
for (i in 1:length(variables)) {#
		X %<>%#
			mutate(#
				var_observed_minus_mean_of_observed_means = #
						# (observed -#
						eval(#
							parse(#
								text = paste(#
									"X$", #
									variables[i], #
									"_mean_observed", #
									sep=""#
								)#
							)#
						) - #
						# true)#
						eval(#
							parse(#
								text = paste(#
									"X$", #
									variables[i], #
									"_mean_of_observed_means", #
									sep=""#
								)#
							)#
						)#
			) %>%#
			setnames(#
				., #
				"var_observed_minus_mean_of_observed_means", #
				paste(#
					variables[i], #
					"_observed_minus_mean_of_observed_means", #
					sep=""#
				)#
			)	#
	}#
	if (!(is.null(rvar))) {#
		for (i in 1:length(rvar)) {#
			X %<>%#
				mutate(#
					var_observed_minus_mean_of_observed_means = #
							# (observed -#
							eval(#
								parse(#
									text = paste(#
										"X$", #
										rvar[i], #
										"_mean_observed", #
										sep=""#
									)#
								)#
							) - #
							# true)#
							eval(#
								parse(#
									text = paste(#
										"X$", #
										rvar[i], #
										"_mean_of_observed_means", #
										sep=""#
									)#
								)#
							)#
				) %>%#
				setnames(#
					., #
					"var_observed_minus_mean_of_observed_means", #
					paste(#
						rvar[i], #
						"_observed_minus_mean_of_observed_means", #
						sep=""#
					)#
				)	#
			}#
		}#
	}
head(X)
i=1
setwd('/Users/KSauby/Documents/Projects/ACS/R')
A <- vector("list", length(variables))
setwd('/Users/KSauby/Documents/Projects/ACS/R')
A[[i]] <- list()#
		A[[i]] <- X.grp %>%#
			summarise_(#
				# save true mean#
				var_true_mean = interp(#
					~var[1], #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean", #
							sep=""#
						)#
					)#
				),#
				# calculate mean of observed means#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate sum of MSEs#
				var_sum_of_observed_minus_true_sqrd = interp(#
					~sum(var^2, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed_minus_true",#
							sep=""#
						)#
					)#
				),#
				# calculate mean of simulated HT variance estimates#
				var_mean_of_var_estimates = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_var_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate variance of simulated HT mean estimates#
				var_var_of_mean_estimates = interp(#
					~var(variable, na.rm = TRUE), #
					variable = #
					as.name(#
						paste(#
							variables[i],#
							"_observed_minus_mean_of_observed_means",#
							sep=""#
						)#
					)#
				)#
			) %>%#
			as.data.frame
setwd('/Users/KSauby/Documents/Projects/ACS/R')
variables
i
k
j
setwd('/Users/KSauby/Documents/Projects/ACS/R')
paste(#
						variables[i], #
						"_", #
						statistics[j], #
						"_observed_minus_true", #
						sep=""#
					)
setwd('/Users/KSauby/Documents/Projects/ACS/R')
paste(#
							rvar[i], #
							"_", #
							ratio.statistics[j], #
							"_observed_minus_true", #
							sep=""#
						)
setwd('/Users/KSauby/Documents/Projects/ACS/R')
. <- NULL#
	X <- merge(population_data_summary, simulation_data, by=grouping.variables)#
	# number of simulations#
	n_sims <- X %>% #
		group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots")) %>%#
		summarise(n_sims = length(N.Total.plots))#
	X <- merge(X, n_sims, by=c(grouping.variables, "N.SRSWOR.plots"))#
	# mean of observed means	#
	temp <- X %>% group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	A <- vector("list", length(variables))#
	for (i in 1:length(variables)) {#
		A[[i]] <- list()#
		A[[i]] <- temp %>%#
			summarise_(#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				)#
			) %>%#
			setnames(#
		      	.,#
		      	"var_mean_of_observed_means",#
		      	paste(#
		      		variables[i],#
		      		"_mean_of_observed_means",#
		      		sep=""#
				)#
			)#
	}#
	Y <- Reduce(#
		function(x, y) merge(#
			x, y,#
			by=c(grouping.variables, "N.SRSWOR.plots", "n_sims")#
		),#
		A#
	)#
	if (!(is.null(rvar))) {#
		for (i in 1:length(rvar)) {#
			A[[i]] <- list()#
			A[[i]] <- temp %>%#
				summarise_(#
					var_mean_of_observed_means = interp(#
						~mean(var, na.rm = TRUE), #
						var = #
						as.name(#
							paste(#
								rvar[i],#
								"_mean_observed",#
								sep=""#
							)#
						)#
					)#
				) %>%#
				setnames(#
			      	.,#
			      	"var_mean_of_observed_means",#
			      	paste(#
			      		rvar[i],#
			      		"_mean_of_observed_means",#
			      		sep=""#
					)#
				)#
		}#
		Z <- Reduce(#
			function(x, y) merge(#
				x, y,#
				by=c(grouping.variables, "N.SRSWOR.plots", "n_sims")#
			),#
			A#
		)#
		Y <- merge(#
			Y, Z,#
			by=c(grouping.variables, "N.SRSWOR.plots", "n_sims")#
		)#
	}#
	X <- merge(X, Y, by=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	X.grp <- X %>% group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	# calculate squared differences for each simulation and variable#
	for (i in 1:length(variables)) {#
		for (j in 1:length(statistics)) {#
			X %<>%#
				mutate(#
					var_observed_minus_true = #
							# (observed -#
							eval(#
								parse(#
									text=paste(#
										"X$", #
										variables[i], #
										"_", #
										statistics[j], #
										"_observed", #
										sep=""#
									)#
								)#
							) - #
							# true)#
							eval(#
								parse(#
									text=paste(#
										"X$", #
										variables[i], #
										"_", #
										statistics[j], #
										sep=""#
									)#
								)#
							)#
				) %>%#
				setnames(#
					., #
					"var_observed_minus_true", #
					paste(#
						variables[i], #
						"_", #
						statistics[j], #
						"_observed_minus_true", #
						sep=""#
					)#
				)	#
		}#
	}#
	if (!(is.null(rvar))) {#
		for (i in 1:length(rvar)) {#
			for (j in 1:length(ratio.statistics)) {#
				X %<>%#
					mutate(#
						var_observed_minus_true = #
								# (observed -#
								eval(parse(text=paste(#
									"X$", #
									rvar[i],#
								 	"_", #
									ratio.statistics[j], #
									"_observed", #
									sep=""#
								))) - #
								# true)#
								eval(parse(text=paste(#
									"X$", #
									rvar[i], #
									"_ratio_", #
									ratio.statistics[j], #
									sep=""#
								)))#
					) %>%#
					setnames(#
						., #
						"var_observed_minus_true", #
						paste(#
							rvar[i], #
							"_", #
							ratio.statistics[j], #
							"_observed_minus_true", #
							sep=""#
						)#
					)#
			}#
		}#
	}#
	# calculate squared differences (observed - mean of observed) for each variable#
	for (i in 1:length(variables)) {#
		X %<>%#
			mutate(#
				var_observed_minus_mean_of_observed_means = #
						# (observed -#
						eval(#
							parse(#
								text = paste(#
									"X$", #
									variables[i], #
									"_mean_observed", #
									sep=""#
								)#
							)#
						) - #
						# true)#
						eval(#
							parse(#
								text = paste(#
									"X$", #
									variables[i], #
									"_mean_of_observed_means", #
									sep=""#
								)#
							)#
						)#
			) %>%#
			setnames(#
				., #
				"var_observed_minus_mean_of_observed_means", #
				paste(#
					variables[i], #
					"_observed_minus_mean_of_observed_means", #
					sep=""#
				)#
			)	#
	}#
	if (!(is.null(rvar))) {#
		for (i in 1:length(rvar)) {#
			X %<>%#
				mutate(#
					var_observed_minus_mean_of_observed_means = #
							# (observed -#
							eval(#
								parse(#
									text = paste(#
										"X$", #
										rvar[i], #
										"_mean_observed", #
										sep=""#
									)#
								)#
							) - #
							# true)#
							eval(#
								parse(#
									text = paste(#
										"X$", #
										rvar[i], #
										"_mean_of_observed_means", #
										sep=""#
									)#
								)#
							)#
				) %>%#
				setnames(#
					., #
					"var_observed_minus_mean_of_observed_means", #
					paste(#
						rvar[i], #
						"_observed_minus_mean_of_observed_means", #
						sep=""#
					)#
				)	#
		}#
	}#
	# calculate bias and MSE
head(X)
setwd('/Users/KSauby/Documents/Projects/ACS/R')
. <- NULL#
	X <- merge(population_data_summary, simulation_data, by=grouping.variables)#
	# number of simulations#
	n_sims <- X %>% #
		group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots")) %>%#
		summarise(n_sims = length(N.Total.plots))#
	X <- merge(X, n_sims, by=c(grouping.variables, "N.SRSWOR.plots"))#
	# mean of observed means	#
	temp <- X %>% group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	A <- vector("list", length(variables))#
	for (i in 1:length(variables)) {#
		A[[i]] <- list()#
		A[[i]] <- temp %>%#
			summarise_(#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				)#
			) %>%#
			setnames(#
		      	.,#
		      	"var_mean_of_observed_means",#
		      	paste(#
		      		variables[i],#
		      		"_mean_of_observed_means",#
		      		sep=""#
				)#
			)#
	}#
	Y <- Reduce(#
		function(x, y) merge(#
			x, y,#
			by=c(grouping.variables, "N.SRSWOR.plots", "n_sims")#
		),#
		A#
	)#
	if (!(is.null(rvar))) {#
		for (i in 1:length(rvar)) {#
			A[[i]] <- list()#
			A[[i]] <- temp %>%#
				summarise_(#
					var_mean_of_observed_means = interp(#
						~mean(var, na.rm = TRUE), #
						var = #
						as.name(#
							paste(#
								rvar[i],#
								"_mean_observed",#
								sep=""#
							)#
						)#
					)#
				) %>%#
				setnames(#
			      	.,#
			      	"var_mean_of_observed_means",#
			      	paste(#
			      		rvar[i],#
			      		"_mean_of_observed_means",#
			      		sep=""#
					)#
				)#
		}#
		Z <- Reduce(#
			function(x, y) merge(#
				x, y,#
				by=c(grouping.variables, "N.SRSWOR.plots", "n_sims")#
			),#
			A#
		)#
		Y <- merge(#
			Y, Z,#
			by=c(grouping.variables, "N.SRSWOR.plots", "n_sims")#
		)#
	}#
	X <- merge(X, Y, by=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	X.grp <- X %>% group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	# calculate squared differences for each simulation and variable#
	for (i in 1:length(variables)) {#
		for (j in 1:length(statistics)) {#
			X %<>%#
				mutate(#
					var_observed_minus_true = #
							# (observed -#
							eval(#
								parse(#
									text=paste(#
										"X$", #
										variables[i], #
										"_", #
										statistics[j], #
										"_observed", #
										sep=""#
									)#
								)#
							) - #
							# true)#
							eval(#
								parse(#
									text=paste(#
										"X$", #
										variables[i], #
										"_", #
										statistics[j], #
										sep=""#
									)#
								)#
							)#
				) %>%#
				setnames(#
					., #
					"var_observed_minus_true", #
					paste(#
						variables[i], #
						"_", #
						statistics[j], #
						"_observed_minus_true", #
						sep=""#
					)#
				)	#
		}#
	}
head(X)
setwd('/Users/KSauby/Documents/Projects/ACS/R')
paste(#
							rvar[i], #
							"_", #
							ratio.statistics[j], #
							"_observed_minus_true", #
							sep=""#
						)
setwd('/Users/KSauby/Documents/Projects/ACS/R')
if (!(is.null(rvar))) {#
		for (i in 1:length(rvar)) {#
			for (j in 1:length(ratio.statistics)) {#
				X %<>%#
					mutate(#
						var_observed_minus_true = #
								# (observed -#
								eval(parse(text=paste(#
									"X$", #
									rvar[i],#
								 	"_", #
									ratio.statistics[j], #
									"_observed", #
									sep=""#
								))) - #
								# true)#
								eval(parse(text=paste(#
									"X$", #
									rvar[i], #
									"_ratio_", #
									ratio.statistics[j], #
									sep=""#
								)))#
					) %>%#
					setnames(#
						., #
						"var_observed_minus_true", #
						paste(#
							rvar[i], #
							"_", #
							ratio.statistics[j], #
							"_observed_minus_true", #
							sep=""#
						)#
					)#
			}#
		}#
	}
head(X)
setwd('/Users/KSauby/Documents/Projects/ACS/R')
. <- NULL#
	X <- merge(population_data_summary, simulation_data, by=grouping.variables)#
	# number of simulations#
	n_sims <- X %>% #
		group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots")) %>%#
		summarise(n_sims = length(N.Total.plots))#
	X <- merge(X, n_sims, by=c(grouping.variables, "N.SRSWOR.plots"))#
	# mean of observed means	#
	temp <- X %>% group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	A <- vector("list", length(variables))#
	for (i in 1:length(variables)) {#
		A[[i]] <- list()#
		A[[i]] <- temp %>%#
			summarise_(#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				)#
			) %>%#
			setnames(#
		      	.,#
		      	"var_mean_of_observed_means",#
		      	paste(#
		      		variables[i],#
		      		"_mean_of_observed_means",#
		      		sep=""#
				)#
			)#
	}#
	Y <- Reduce(#
		function(x, y) merge(#
			x, y,#
			by=c(grouping.variables, "N.SRSWOR.plots", "n_sims")#
		),#
		A#
	)#
	if (!(is.null(rvar))) {#
		for (i in 1:length(rvar)) {#
			A[[i]] <- list()#
			A[[i]] <- temp %>%#
				summarise_(#
					var_mean_of_observed_means = interp(#
						~mean(var, na.rm = TRUE), #
						var = #
						as.name(#
							paste(#
								rvar[i],#
								"_mean_observed",#
								sep=""#
							)#
						)#
					)#
				) %>%#
				setnames(#
			      	.,#
			      	"var_mean_of_observed_means",#
			      	paste(#
			      		rvar[i],#
			      		"_mean_of_observed_means",#
			      		sep=""#
					)#
				)#
		}#
		Z <- Reduce(#
			function(x, y) merge(#
				x, y,#
				by=c(grouping.variables, "N.SRSWOR.plots", "n_sims")#
			),#
			A#
		)#
		Y <- merge(#
			Y, Z,#
			by=c(grouping.variables, "N.SRSWOR.plots", "n_sims")#
		)#
	}#
	X <- merge(X, Y, by=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	X.grp <- X %>% group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	# calculate squared differences for each simulation and variable#
	for (i in 1:length(variables)) {#
		for (j in 1:length(statistics)) {#
			X %<>%#
				mutate(#
					var_observed_minus_true = #
							# (observed -#
							eval(#
								parse(#
									text=paste(#
										"X$", #
										variables[i], #
										"_", #
										statistics[j], #
										"_observed", #
										sep=""#
									)#
								)#
							) - #
							# true)#
							eval(#
								parse(#
									text=paste(#
										"X$", #
										variables[i], #
										"_", #
										statistics[j], #
										sep=""#
									)#
								)#
							)#
				) %>%#
				setnames(#
					., #
					"var_observed_minus_true", #
					paste(#
						variables[i], #
						"_", #
						statistics[j], #
						"_observed_minus_true", #
						sep=""#
					)#
				)	#
		}#
	}#
	if (!(is.null(rvar))) {#
		for (i in 1:length(rvar)) {#
			for (j in 1:length(ratio.statistics)) {#
				X %<>%#
					mutate(#
						rvar_observed_minus_true = #
								# (observed -#
								eval(parse(text=paste(#
									"X$", #
									rvar[i],#
								 	"_", #
									ratio.statistics[j], #
									"_observed", #
									sep=""#
								))) - #
								# true)#
								eval(parse(text=paste(#
									"X$", #
									rvar[i], #
									"_ratio_", #
									ratio.statistics[j], #
									sep=""#
								)))#
					) %>%#
					setnames(#
						., #
						"rvar_observed_minus_true", #
						paste(#
							rvar[i], #
							"_", #
							ratio.statistics[j], #
							"_observed_minus_true", #
							sep=""#
						)#
					)#
			}#
		}#
	}
head(X)
setwd('/Users/KSauby/Documents/Projects/ACS/R')
for (i in 1:length(variables)) {#
		X %<>%#
			mutate(#
				var_observed_minus_mean_of_observed_means = #
						# (observed -#
						eval(#
							parse(#
								text = paste(#
									"X$", #
									variables[i], #
									"_mean_observed", #
									sep=""#
								)#
							)#
						) - #
						# true)#
						eval(#
							parse(#
								text = paste(#
									"X$", #
									variables[i], #
									"_mean_of_observed_means", #
									sep=""#
								)#
							)#
						)#
			) %>%#
			setnames(#
				., #
				"var_observed_minus_mean_of_observed_means", #
				paste(#
					variables[i], #
					"_observed_minus_mean_of_observed_means", #
					sep=""#
				)#
			)	#
	}#
	if (!(is.null(rvar))) {#
		for (i in 1:length(rvar)) {#
			X %<>%#
				mutate(#
					var_observed_minus_mean_of_observed_means = #
							# (observed -#
							eval(#
								parse(#
									text = paste(#
										"X$", #
										rvar[i], #
										"_mean_observed", #
										sep=""#
									)#
								)#
							) - #
							# true)#
							eval(#
								parse(#
									text = paste(#
										"X$", #
										rvar[i], #
										"_mean_of_observed_means", #
										sep=""#
									)#
								)#
							)#
				) %>%#
				setnames(#
					., #
					"var_observed_minus_mean_of_observed_means", #
					paste(#
						rvar[i], #
						"_observed_minus_mean_of_observed_means", #
						sep=""#
					)#
				)	#
		}#
	}
setwd('/Users/KSauby/Documents/Projects/ACS/R')
A <- vector("list", length(variables))
i
i=1
setwd('/Users/KSauby/Documents/Projects/ACS/R')
A[[i]] <- list()#
		A[[i]] <- X.grp %>%#
			summarise_(#
				# save true mean#
				var_true_mean = interp(#
					~var[1], #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean", #
							sep=""#
						)#
					)#
				),#
				# calculate mean of observed means#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate sum of MSEs#
				var_sum_of_observed_minus_true_sqrd = interp(#
					~sum(var^2, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed_minus_true",#
							sep=""#
						)#
					)#
				),#
				# calculate mean of simulated HT variance estimates#
				var_mean_of_var_estimates = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_var_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate variance of simulated HT mean estimates#
				var_var_of_mean_estimates = interp(#
					~var(variable, na.rm = TRUE), #
					variable = #
					as.name(#
						paste(#
							variables[i],#
							"_observed_minus_mean_of_observed_means",#
							sep=""#
						)#
					)#
				)#
			) %>%#
			as.data.frame
setwd('/Users/KSauby/Documents/Projects/ACS/R')
X.grp <- X %>% group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))
setwd('/Users/KSauby/Documents/Projects/ACS/R')
A[[i]] <- list()#
		A[[i]] <- X.grp %>%#
			summarise_(#
				# save true mean#
				var_true_mean = interp(#
					~var[1], #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean", #
							sep=""#
						)#
					)#
				),#
				# calculate mean of observed means#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate sum of MSEs#
				var_sum_of_observed_minus_true_sqrd = interp(#
					~sum(var^2, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed_minus_true",#
							sep=""#
						)#
					)#
				),#
				# calculate mean of simulated HT variance estimates#
				var_mean_of_var_estimates = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_var_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate variance of simulated HT mean estimates#
				var_var_of_mean_estimates = interp(#
					~var(variable, na.rm = TRUE), #
					variable = #
					as.name(#
						paste(#
							variables[i],#
							"_observed_minus_mean_of_observed_means",#
							sep=""#
						)#
					)#
				)#
			) %>%#
			as.data.frame
setwd('/Users/KSauby/Documents/Projects/ACS/R')
A[[i]] %<>% #
				mutate(#
					# var_mean = Mean()#
					var_RB = 100 * #
						(var_mean_of_observed_means - var_true_mean) / #
						var_true_mean,#
					var_MSE = var_sum_of_observed_minus_true_sqrd/n_sims#
				) %>%#
				setnames(#
		      		.,#
		      		"var_RB",#
		      		paste(#
		      			variables[i],#
		      			"_",#
		      			statistics[1], #
		      			"_RB",#
		      			sep=""#
					)#
				) %>%#
				setnames(#
		      		.,#
		      		"var_MSE",#
		      		paste(#
		      			variables[i],#
		      			"_",#
		      			statistics[1], #
		      			"_MSE",#
		      			sep=""#
					)#
				) %>%#
				dplyr::select(-c(#
					var_sum_of_observed_minus_true_sqrd, #
					var_true_mean,#
					var_mean_of_observed_means#
				))
head(A[[i]])
setwd('/Users/KSauby/Documents/Projects/ACS/R')
A[[i]] <- list()#
		A[[i]] <- X.grp %>%#
			summarise_(#
				# save true mean#
				var_true_mean = interp(#
					~var[1], #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean", #
							sep=""#
						)#
					)#
				),#
				# calculate mean of observed means#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate sum of MSEs#
				var_sum_of_observed_minus_true_sqrd = interp(#
					~sum(var^2, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed_minus_true",#
							sep=""#
						)#
					)#
				),#
				# calculate mean of simulated HT variance estimates#
				var_mean_of_var_estimates = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_var_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate variance of simulated HT mean estimates#
				var_var_of_mean_estimates = interp(#
					~var(variable, na.rm = TRUE), #
					variable = #
					as.name(#
						paste(#
							variables[i],#
							"_observed_minus_mean_of_observed_means",#
							sep=""#
						)#
					)#
				)#
			) %>%#
			as.data.frame#
			A[[i]] %<>% #
				mutate(#
					# var_mean = Mean()#
					var_RB = 100 * #
						(var_mean_of_observed_means - var_true_mean) / #
						var_true_mean,#
					var_MSE = var_sum_of_observed_minus_true_sqrd/n_sims#
				) %>%#
				setnames(#
		      		.,#
		      		"var_RB",#
		      		paste(#
		      			variables[i],#
		      			"_",#
		      			statistics[1], #
		      			"_RB",#
		      			sep=""#
					)#
				) %>%#
				setnames(#
		      		.,#
		      		"var_MSE",#
		      		paste(#
		      			variables[i],#
		      			"_",#
		      			statistics[1], #
		      			"_MSE",#
		      			sep=""#
					)#
				) %>%#
				setnames(#
		      		.,#
		      		"var_mean_of_var_estimates",#
		      		paste(#
		      			variables[i],#
		      			"_mean_of_var_estimates",#
		      			sep=""#
					)#
				) %>%#
				setnames(#
		      		.,#
		      		"var_var_of_mean_estimates",#
		      		paste(#
		      			variables[i],#
		      			"_",#
		      			statistics[1], #
		      			"_var_of_mean_estimates",#
		      			sep=""#
					)#
				) %>%#
				dplyr::select(-c(#
					var_sum_of_observed_minus_true_sqrd, #
					var_true_mean,#
					var_mean_of_observed_means#
				))
head(A[[i]])
setwd('/Users/KSauby/Documents/Projects/ACS/R')
A[[i]] <- list()#
		A[[i]] <- X.grp %>%#
			summarise_(#
				# save true mean#
				var_true_mean = interp(#
					~var[1], #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean", #
							sep=""#
						)#
					)#
				),#
				# calculate mean of observed means#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate sum of MSEs#
				var_sum_of_observed_minus_true_sqrd = interp(#
					~sum(var^2, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed_minus_true",#
							sep=""#
						)#
					)#
				),#
				# calculate mean of simulated HT variance estimates#
				var_mean_of_var_estimates = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_var_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate variance of simulated HT mean estimates#
				var_var_of_mean_estimates = interp(#
					~var(variable, na.rm = TRUE), #
					variable = #
					as.name(#
						paste(#
							variables[i],#
							"_observed_minus_mean_of_observed_means",#
							sep=""#
						)#
					)#
				)#
			) %>%#
			as.data.frame#
			A[[i]] %<>% #
				mutate(#
					# var_mean = Mean()#
					var_RB = 100 * #
						(var_mean_of_observed_means - var_true_mean) / #
						var_true_mean,#
					var_MSE = var_sum_of_observed_minus_true_sqrd/n_sims#
				) %>%#
				setnames(#
		      		.,#
		      		"var_RB",#
		      		paste(#
		      			variables[i],#
		      			"_",#
		      			statistics[1], #
		      			"_RB",#
		      			sep=""#
					)#
				) %>%#
				setnames(#
		      		.,#
		      		"var_MSE",#
		      		paste(#
		      			variables[i],#
		      			"_",#
		      			statistics[1], #
		      			"_MSE",#
		      			sep=""#
					)#
				) %>%#
				setnames(#
		      		.,#
		      		"var_mean_of_var_estimates",#
		      		paste(#
		      			variables[i],#
		      			"_mean_of_var_estimates",#
		      			sep=""#
					)#
				) %>%#
				setnames(#
		      		.,#
		      		"var_var_of_mean_estimates",#
		      		paste(#
		      			variables[i],#
		      			"_var_of_mean_estimates",#
		      			sep=""#
					)#
				) %>%#
				dplyr::select(-c(#
					var_sum_of_observed_minus_true_sqrd, #
					var_true_mean,#
					var_mean_of_observed_means#
				))
head(A[[i]])
setwd('/Users/KSauby/Documents/Projects/ACS/R')
A[[i]] <- list()#
		A[[i]] <- X.grp %>%#
			summarise_(#
				# save true mean#
				var_true_mean = interp(#
					~var[1], #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean", #
							sep=""#
						)#
					)#
				),#
				# calculate mean of observed means#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate sum of MSEs#
				var_sum_of_observed_minus_true_sqrd = interp(#
					~sum(var^2, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed_minus_true",#
							sep=""#
						)#
					)#
				),#
				# calculate mean of simulated HT variance estimates#
				var_mean_of_var_estimates = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_var_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate variance of simulated HT mean estimates#
				var_var_of_mean_estimates = interp(#
					~var(variable, na.rm = TRUE), #
					variable = #
					as.name(#
						paste(#
							variables[i],#
							"_observed_minus_mean_of_observed_means",#
							sep=""#
						)#
					)#
				)#
			) %>%#
				setnames(#
		      		.,#
		      		"var_mean_of_var_estimates",#
		      		paste(#
		      			variables[i],#
		      			"_mean_of_var_estimates",#
		      			sep=""#
					)#
				) %>%#
				setnames(#
		      		.,#
		      		"var_var_of_mean_estimates",#
		      		paste(#
		      			variables[i],#
		      			"_var_of_mean_estimates",#
		      			sep=""#
				) %>%#
				as.data.frame
)
setwd('/Users/KSauby/Documents/Projects/ACS/R')
A[[i]] <- list()#
		A[[i]] <- X.grp %>%#
			summarise_(#
				# save true mean#
				var_true_mean = interp(#
					~var[1], #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean", #
							sep=""#
						)#
					)#
				),#
				# calculate mean of observed means#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate sum of MSEs#
				var_sum_of_observed_minus_true_sqrd = interp(#
					~sum(var^2, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed_minus_true",#
							sep=""#
						)#
					)#
				),#
				# calculate mean of simulated HT variance estimates#
				var_mean_of_var_estimates = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_var_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate variance of simulated HT mean estimates#
				var_var_of_mean_estimates = interp(#
					~var(variable, na.rm = TRUE), #
					variable = #
					as.name(#
						paste(#
							variables[i],#
							"_observed_minus_mean_of_observed_means",#
							sep=""#
						)#
					)#
				)#
			) %>%#
				setnames(#
		      		.,#
		      		"var_mean_of_var_estimates",#
		      		paste(#
		      			variables[i],#
		      			"_mean_of_var_estimates",#
		      			sep=""#
					)#
				) %>%#
				setnames(#
		      		.,#
		      		"var_var_of_mean_estimates",#
		      		paste(#
		      			variables[i],#
		      			"_var_of_mean_estimates",#
		      			sep=""#
					)#
				) %>%#
				as.data.frame
head(A)
setwd('/Users/KSauby/Documents/Projects/ACS/R')
paste(#
		      			variables[i],#
		      			"_var_of_mean",#
		      			sep=""#
					)
setwd('/Users/KSauby/Documents/Projects/ACS/R')
A[[i]] <- list()#
		A[[i]] <- X.grp %>%#
			summarise_(#
				# save true mean#
				var_true_mean = interp(#
					~var[1], #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean", #
							sep=""#
						)#
					)#
				),#
				# calculate mean of observed means#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate sum of MSEs#
				var_sum_of_observed_minus_true_sqrd = interp(#
					~sum(var^2, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed_minus_true",#
							sep=""#
						)#
					)#
				),#
				# calculate mean of simulated HT variance estimates#
				var_mean_of_var_estimates = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_var_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate variance of simulated HT mean estimates#
				var_var_of_mean_estimates = interp(#
					~var(variable, na.rm = TRUE), #
					variable = #
					as.name(#
						paste(#
							variables[i],#
							"_observed_minus_mean_of_observed_means",#
							sep=""#
						)#
					)#
				)#
			) %>%#
				setnames(#
		      		.,#
		      		"var_mean_of_var_estimates",#
		      		paste(#
		      			variables[i],#
		      			"_mean_of_var_estimates",#
		      			sep=""#
					)#
				) %>%#
				setnames(#
		      		.,#
		      		"var_var_of_mean_estimates",#
		      		paste(#
		      			variables[i],#
		      			"_var_of_mean_estimates",#
		      			sep=""#
					)#
				) %>%#
				as.data.frame#
			A[[i]] %<>% #
				mutate(#
					# var_mean = Mean()#
					var_RB = 100 * #
						(var_mean_of_observed_means - var_true_mean) / #
						var_true_mean,#
					var_MSE = var_sum_of_observed_minus_true_sqrd/n_sims,#
					var_var_of_mean = 100 * (Stricta_mean_of_var_estimates - #
						Stricta_var_of_mean_estimates) / #
						Stricta_var_of_mean_estimates#
				) %>%#
				setnames(#
		      		.,#
		      		"var_RB",#
		      		paste(#
		      			variables[i],#
		      			"_mean_RB",#
		      			sep=""#
					)#
				) %>%#
				setnames(#
		      		.,#
		      		"var_MSE",#
		      		paste(#
		      			variables[i],#
		      			"_mean_MSE",#
		      			sep=""#
					)#
				) %>%#
				setnames(#
		      		.,#
		      		"var_var_of_mean",#
		      		paste(#
		      			variables[i],#
		      			"_var_of_mean",#
		      			sep=""#
					)#
				)#
				)
setwd('/Users/KSauby/Documents/Projects/ACS/R')
A[[i]] <- list()#
		A[[i]] <- X.grp %>%#
			summarise_(#
				# save true mean#
				var_true_mean = interp(#
					~var[1], #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean", #
							sep=""#
						)#
					)#
				),#
				# calculate mean of observed means#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate sum of MSEs#
				var_sum_of_observed_minus_true_sqrd = interp(#
					~sum(var^2, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed_minus_true",#
							sep=""#
						)#
					)#
				),#
				# calculate mean of simulated HT variance estimates#
				var_mean_of_var_estimates = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_var_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate variance of simulated HT mean estimates#
				var_var_of_mean_estimates = interp(#
					~var(variable, na.rm = TRUE), #
					variable = #
					as.name(#
						paste(#
							variables[i],#
							"_observed_minus_mean_of_observed_means",#
							sep=""#
						)#
					)#
				)#
			) %>%#
				setnames(#
		      		.,#
		      		"var_mean_of_var_estimates",#
		      		paste(#
		      			variables[i],#
		      			"_mean_of_var_estimates",#
		      			sep=""#
					)#
				) %>%#
				setnames(#
		      		.,#
		      		"var_var_of_mean_estimates",#
		      		paste(#
		      			variables[i],#
		      			"_var_of_mean_estimates",#
		      			sep=""#
					)#
				) %>%#
				as.data.frame#
			A[[i]] %<>% #
				mutate(#
					# var_mean = Mean()#
					var_RB = 100 * #
						(var_mean_of_observed_means - var_true_mean) / #
						var_true_mean,#
					var_MSE = var_sum_of_observed_minus_true_sqrd/n_sims,#
					var_var_of_mean = 100 * (Stricta_mean_of_var_estimates - #
						Stricta_var_of_mean_estimates) / #
						Stricta_var_of_mean_estimates#
				) %>%#
				setnames(#
		      		.,#
		      		"var_RB",#
		      		paste(#
		      			variables[i],#
		      			"_mean_RB",#
		      			sep=""#
					)#
				) %>%#
				setnames(#
		      		.,#
		      		"var_MSE",#
		      		paste(#
		      			variables[i],#
		      			"_mean_MSE",#
		      			sep=""#
					)#
				) %>%#
				setnames(#
		      		.,#
		      		"var_var_of_mean",#
		      		paste(#
		      			variables[i],#
		      			"_var_of_mean",#
		      			sep=""#
					)#
				)
A[[i]]
A[[i]] %>% head
setwd('/Users/KSauby/Documents/Projects/ACS/R')
A[[i]] <- list()#
		A[[i]] <- X.grp %>%#
			summarise_(#
				# save true mean#
				var_true_mean = interp(#
					~var[1], #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean", #
							sep=""#
						)#
					)#
				),#
				# calculate mean of observed means#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate sum of MSEs#
				var_sum_of_observed_minus_true_sqrd = interp(#
					~sum(var^2, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed_minus_true",#
							sep=""#
						)#
					)#
				),#
				# calculate mean of simulated HT variance estimates#
				var_mean_of_var_estimates = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_var_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate variance of simulated HT mean estimates#
				var_var_of_mean_estimates = interp(#
					~var(variable, na.rm = TRUE), #
					variable = #
					as.name(#
						paste(#
							variables[i],#
							"_observed_minus_mean_of_observed_means",#
							sep=""#
						)#
					)#
				)#
			) %>%#
				setnames(#
		      		.,#
		      		"var_mean_of_var_estimates",#
		      		paste(#
		      			variables[i],#
		      			"_mean_of_var_estimates",#
		      			sep=""#
					)#
				) %>%#
				setnames(#
		      		.,#
		      		"var_var_of_mean_estimates",#
		      		paste(#
		      			variables[i],#
		      			"_var_of_mean_estimates",#
		      			sep=""#
					)#
				) %>%#
				as.data.frame#
			A[[i]] %<>% #
				mutate(#
					# var_mean = Mean()#
					var_RB = 100 * #
						(var_mean_of_observed_means - var_true_mean) / #
						var_true_mean,#
					var_MSE = var_sum_of_observed_minus_true_sqrd/n_sims,#
					var_var_of_mean = 100 * (Stricta_mean_of_var_estimates - #
						Stricta_var_of_mean_estimates) / #
						Stricta_var_of_mean_estimates#
				) %>%#
				setnames(#
		      		.,#
		      		"var_RB",#
		      		paste(#
		      			variables[i],#
		      			"_mean_RB",#
		      			sep=""#
					)#
				) %>%#
				setnames(#
		      		.,#
		      		"var_MSE",#
		      		paste(#
		      			variables[i],#
		      			"_mean_MSE",#
		      			sep=""#
					)#
				) %>%#
				setnames(#
		      		.,#
		      		"var_var_of_mean",#
		      		paste(#
		      			variables[i],#
		      			"_var_of_mean",#
		      			sep=""#
					)#
				) %>%#
				dplyr::select(-c(#
					var_true_mean,#
					var_mean_of_observed_means,#
					var_sum_of_observed_minus_true_sqrd#
				))
A[[i]] %>% head
setwd('/Users/KSauby/Documents/Projects/ACS/R')
. <- NULL#
	X <- merge(population_data_summary, simulation_data, by=grouping.variables)#
	# number of simulations#
	n_sims <- X %>% #
		group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots")) %>%#
		summarise(n_sims = length(N.Total.plots))#
	X <- merge(X, n_sims, by=c(grouping.variables, "N.SRSWOR.plots"))#
	# mean of observed means	#
	temp <- X %>% group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	A <- vector("list", length(variables))#
	for (i in 1:length(variables)) {#
		A[[i]] <- list()#
		A[[i]] <- temp %>%#
			summarise_(#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				)#
			) %>%#
			setnames(#
		      	.,#
		      	"var_mean_of_observed_means",#
		      	paste(#
		      		variables[i],#
		      		"_mean_of_observed_means",#
		      		sep=""#
				)#
			)#
	}#
	Y <- Reduce(#
		function(x, y) merge(#
			x, y,#
			by=c(grouping.variables, "N.SRSWOR.plots", "n_sims")#
		),#
		A#
	)#
	if (!(is.null(rvar))) {#
		for (i in 1:length(rvar)) {#
			A[[i]] <- list()#
			A[[i]] <- temp %>%#
				summarise_(#
					var_mean_of_observed_means = interp(#
						~mean(var, na.rm = TRUE), #
						var = #
						as.name(#
							paste(#
								rvar[i],#
								"_mean_observed",#
								sep=""#
							)#
						)#
					)#
				) %>%#
				setnames(#
			      	.,#
			      	"var_mean_of_observed_means",#
			      	paste(#
			      		rvar[i],#
			      		"_mean_of_observed_means",#
			      		sep=""#
					)#
				)#
		}#
		Z <- Reduce(#
			function(x, y) merge(#
				x, y,#
				by=c(grouping.variables, "N.SRSWOR.plots", "n_sims")#
			),#
			A#
		)#
		Y <- merge(#
			Y, Z,#
			by=c(grouping.variables, "N.SRSWOR.plots", "n_sims")#
		)#
	}#
	X <- merge(X, Y, by=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	# calculate squared differences for each simulation and variable#
	for (i in 1:length(variables)) {#
		for (j in 1:length(statistics)) {#
			X %<>%#
				mutate(#
					var_observed_minus_true = #
							# (observed -#
							eval(#
								parse(#
									text=paste(#
										"X$", #
										variables[i], #
										"_", #
										statistics[j], #
										"_observed", #
										sep=""#
									)#
								)#
							) - #
							# true)#
							eval(#
								parse(#
									text=paste(#
										"X$", #
										variables[i], #
										"_", #
										statistics[j], #
										sep=""#
									)#
								)#
							)#
				) %>%#
				setnames(#
					., #
					"var_observed_minus_true", #
					paste(#
						variables[i], #
						"_", #
						statistics[j], #
						"_observed_minus_true", #
						sep=""#
					)#
				)	#
		}#
	}#
	if (!(is.null(rvar))) {#
		for (i in 1:length(rvar)) {#
			for (j in 1:length(ratio.statistics)) {#
				X %<>%#
					mutate(#
						rvar_observed_minus_true = #
								# (observed -#
								eval(parse(text=paste(#
									"X$", #
									rvar[i],#
								 	"_", #
									ratio.statistics[j], #
									"_observed", #
									sep=""#
								))) - #
								# true)#
								eval(parse(text=paste(#
									"X$", #
									rvar[i], #
									"_ratio_", #
									ratio.statistics[j], #
									sep=""#
								)))#
					) %>%#
					setnames(#
						., #
						"rvar_observed_minus_true", #
						paste(#
							rvar[i], #
							"_", #
							ratio.statistics[j], #
							"_observed_minus_true", #
							sep=""#
						)#
					)#
			}#
		}#
	}#
	# calculate squared differences (observed - mean of observed) for each variable#
	for (i in 1:length(variables)) {#
		X %<>%#
			mutate(#
				var_observed_minus_mean_of_observed_means = #
						# (observed -#
						eval(#
							parse(#
								text = paste(#
									"X$", #
									variables[i], #
									"_mean_observed", #
									sep=""#
								)#
							)#
						) - #
						# true)#
						eval(#
							parse(#
								text = paste(#
									"X$", #
									variables[i], #
									"_mean_of_observed_means", #
									sep=""#
								)#
							)#
						)#
			) %>%#
			setnames(#
				., #
				"var_observed_minus_mean_of_observed_means", #
				paste(#
					variables[i], #
					"_observed_minus_mean_of_observed_means", #
					sep=""#
				)#
			)	#
	}#
	if (!(is.null(rvar))) {#
		for (i in 1:length(rvar)) {#
			X %<>%#
				mutate(#
					var_observed_minus_mean_of_observed_means = #
							# (observed -#
							eval(#
								parse(#
									text = paste(#
										"X$", #
										rvar[i], #
										"_mean_observed", #
										sep=""#
									)#
								)#
							) - #
							# true)#
							eval(#
								parse(#
									text = paste(#
										"X$", #
										rvar[i], #
										"_mean_of_observed_means", #
										sep=""#
									)#
								)#
							)#
				) %>%#
				setnames(#
					., #
					"var_observed_minus_mean_of_observed_means", #
					paste(#
						rvar[i], #
						"_observed_minus_mean_of_observed_means", #
						sep=""#
					)#
				)	#
		}#
	}#
	# calculate bias and MSE#
	A <- vector("list", length(variables))#
	X.grp <- X %>% group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	for (i in 1:length(variables)) {#
		A[[i]] <- list()#
		A[[i]] <- X.grp %>%#
			summarise_(#
				# save true mean#
				var_true_mean = interp(#
					~var[1], #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean", #
							sep=""#
						)#
					)#
				),#
				# calculate mean of observed means#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate sum of MSEs#
				var_sum_of_observed_minus_true_sqrd = interp(#
					~sum(var^2, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed_minus_true",#
							sep=""#
						)#
					)#
				),#
				# calculate mean of simulated HT variance estimates#
				var_mean_of_var_estimates = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_var_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate variance of simulated HT mean estimates#
				var_var_of_mean_estimates = interp(#
					~var(variable, na.rm = TRUE), #
					variable = #
					as.name(#
						paste(#
							variables[i],#
							"_observed_minus_mean_of_observed_means",#
							sep=""#
						)#
					)#
				)#
			) %>%#
				as.data.frame#
			A[[i]] %<>% #
				mutate(#
					# var_mean = Mean()#
					var_RB = 100 * #
						(var_mean_of_observed_means - var_true_mean) / #
						var_true_mean,#
					var_MSE = var_sum_of_observed_minus_true_sqrd/n_sims,#
					var_var_of_mean = 100 * (var_mean_of_var_estimates - #
						var_var_of_mean_estimates) / #
						var_var_of_mean_estimates#
				) %>%#
				setnames(#
		      		.,#
		      		"var_RB",#
		      		paste(#
		      			variables[i],#
		      			"_mean_RB",#
		      			sep=""#
					)#
				) %>%#
				setnames(#
		      		.,#
		      		"var_MSE",#
		      		paste(#
		      			variables[i],#
		      			"_mean_MSE",#
		      			sep=""#
					)#
				) %>%#
				setnames(#
		      		.,#
		      		"var_var_of_mean",#
		      		paste(#
		      			variables[i],#
		      			"_var_of_mean",#
		      			sep=""#
					)#
				) %>%#
				dplyr::select(-c(#
					var_true_mean,#
					var_mean_of_observed_means,#
					var_sum_of_observed_minus_true_sqrd#
				))
)
i
i=1
setwd('/Users/KSauby/Documents/Projects/ACS/R')
A[[i]] <- list()#
		A[[i]] <- X.grp %>%#
			summarise_(#
				# save true mean#
				var_true_mean = interp(#
					~var[1], #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean", #
							sep=""#
						)#
					)#
				),#
				# calculate mean of observed means#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate sum of MSEs#
				var_sum_of_observed_minus_true_sqrd = interp(#
					~sum(var^2, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed_minus_true",#
							sep=""#
						)#
					)#
				),#
				# calculate mean of simulated HT variance estimates#
				var_mean_of_var_estimates = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_var_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate variance of simulated HT mean estimates#
				var_var_of_mean_estimates = interp(#
					~var(variable, na.rm = TRUE), #
					variable = #
					as.name(#
						paste(#
							variables[i],#
							"_observed_minus_mean_of_observed_means",#
							sep=""#
						)#
					)#
				)#
			) %>%#
				as.data.frame#
			A[[i]] %<>% #
				mutate(#
					# var_mean = Mean()#
					var_RB = 100 * #
						(var_mean_of_observed_means - var_true_mean) / #
						var_true_mean,#
					var_MSE = var_sum_of_observed_minus_true_sqrd/n_sims,#
					var_var_of_mean = 100 * (var_mean_of_var_estimates - #
						var_var_of_mean_estimates) / #
						var_var_of_mean_estimates#
				) %>%#
				setnames(#
		      		.,#
		      		"var_RB",#
		      		paste(#
		      			variables[i],#
		      			"_mean_RB",#
		      			sep=""#
					)#
				) %>%#
				setnames(#
		      		.,#
		      		"var_MSE",#
		      		paste(#
		      			variables[i],#
		      			"_mean_MSE",#
		      			sep=""#
					)#
				) %>%#
				setnames(#
		      		.,#
		      		"var_var_of_mean",#
		      		paste(#
		      			variables[i],#
		      			"_var_of_mean",#
		      			sep=""#
					)#
				) %>%#
				dplyr::select(-c(#
					var_true_mean,#
					var_mean_of_observed_means,#
					var_sum_of_observed_minus_true_sqrd#
				))
A[[i]] %>% head
setwd('/Users/KSauby/Documents/Projects/ACS/R')
A[[i]] <- list()#
		A[[i]] <- X.grp %>%#
			summarise_(#
				# save true mean#
				var_true_mean = interp(#
					~var[1], #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean", #
							sep=""#
						)#
					)#
				),#
				# calculate mean of observed means#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate sum of MSEs#
				var_sum_of_observed_minus_true_sqrd = interp(#
					~sum(var^2, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed_minus_true",#
							sep=""#
						)#
					)#
				),#
				# calculate mean of simulated HT variance estimates#
				var_mean_of_var_estimates = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_var_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate variance of simulated HT mean estimates#
				var_var_of_mean_estimates = interp(#
					~var(variable, na.rm = TRUE), #
					variable = #
					as.name(#
						paste(#
							variables[i],#
							"_observed_minus_mean_of_observed_means",#
							sep=""#
						)#
					)#
				)#
			) %>%#
				as.data.frame#
			A[[i]] %<>% #
				mutate(#
					# var_mean = Mean()#
					var_RB = 100 * #
						(var_mean_of_observed_means - var_true_mean) / #
						var_true_mean,#
					var_MSE = var_sum_of_observed_minus_true_sqrd/n_sims,#
					var_var_RB = 100 * (var_mean_of_var_estimates - #
						var_var_of_mean_estimates) / #
						var_var_of_mean_estimates#
				) %>%#
				setnames(#
		      		.,#
		      		"var_RB",#
		      		paste(#
		      			variables[i],#
		      			"_mean_RB",#
		      			sep=""#
					)#
				) %>%#
				setnames(#
		      		.,#
		      		"var_MSE",#
		      		paste(#
		      			variables[i],#
		      			"_mean_MSE",#
		      			sep=""#
					)#
				) %>%#
				setnames(#
		      		.,#
		      		"var_var_RB",#
		      		paste(#
		      			variables[i],#
		      			"_var_RB",#
		      			sep=""#
					)#
				) %>%#
				dplyr::select(-c(#
					var_true_mean,#
					var_mean_of_observed_means,#
					var_sum_of_observed_minus_true_sqrd,#
					var_mean_of_var_estimates,#
					var_var_of_mean_estimates#
				))
A[[i]] %>% head
setwd('/Users/KSauby/Documents/Projects/ACS/R')
. <- NULL#
	X <- merge(population_data_summary, simulation_data, by=grouping.variables)#
	# number of simulations#
	n_sims <- X %>% #
		group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots")) %>%#
		summarise(n_sims = length(N.Total.plots))#
	X <- merge(X, n_sims, by=c(grouping.variables, "N.SRSWOR.plots"))#
	# mean of observed means	#
	temp <- X %>% group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	A <- vector("list", length(variables))#
	for (i in 1:length(variables)) {#
		A[[i]] <- list()#
		A[[i]] <- temp %>%#
			summarise_(#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				)#
			) %>%#
			setnames(#
		      	.,#
		      	"var_mean_of_observed_means",#
		      	paste(#
		      		variables[i],#
		      		"_mean_of_observed_means",#
		      		sep=""#
				)#
			)#
	}#
	Y <- Reduce(#
		function(x, y) merge(#
			x, y,#
			by=c(grouping.variables, "N.SRSWOR.plots", "n_sims")#
		),#
		A#
	)#
	if (!(is.null(rvar))) {#
		for (i in 1:length(rvar)) {#
			A[[i]] <- list()#
			A[[i]] <- temp %>%#
				summarise_(#
					var_mean_of_observed_means = interp(#
						~mean(var, na.rm = TRUE), #
						var = #
						as.name(#
							paste(#
								rvar[i],#
								"_mean_observed",#
								sep=""#
							)#
						)#
					)#
				) %>%#
				setnames(#
			      	.,#
			      	"var_mean_of_observed_means",#
			      	paste(#
			      		rvar[i],#
			      		"_mean_of_observed_means",#
			      		sep=""#
					)#
				)#
		}#
		Z <- Reduce(#
			function(x, y) merge(#
				x, y,#
				by=c(grouping.variables, "N.SRSWOR.plots", "n_sims")#
			),#
			A#
		)#
		Y <- merge(#
			Y, Z,#
			by=c(grouping.variables, "N.SRSWOR.plots", "n_sims")#
		)#
	}#
	X <- merge(X, Y, by=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	# calculate squared differences for each simulation and variable#
	for (i in 1:length(variables)) {#
		for (j in 1:length(statistics)) {#
			X %<>%#
				mutate(#
					var_observed_minus_true = #
							# (observed -#
							eval(#
								parse(#
									text=paste(#
										"X$", #
										variables[i], #
										"_", #
										statistics[j], #
										"_observed", #
										sep=""#
									)#
								)#
							) - #
							# true)#
							eval(#
								parse(#
									text=paste(#
										"X$", #
										variables[i], #
										"_", #
										statistics[j], #
										sep=""#
									)#
								)#
							)#
				) %>%#
				setnames(#
					., #
					"var_observed_minus_true", #
					paste(#
						variables[i], #
						"_", #
						statistics[j], #
						"_observed_minus_true", #
						sep=""#
					)#
				)	#
		}#
	}#
	if (!(is.null(rvar))) {#
		for (i in 1:length(rvar)) {#
			for (j in 1:length(ratio.statistics)) {#
				X %<>%#
					mutate(#
						rvar_observed_minus_true = #
								# (observed -#
								eval(parse(text=paste(#
									"X$", #
									rvar[i],#
								 	"_", #
									ratio.statistics[j], #
									"_observed", #
									sep=""#
								))) - #
								# true)#
								eval(parse(text=paste(#
									"X$", #
									rvar[i], #
									"_ratio_", #
									ratio.statistics[j], #
									sep=""#
								)))#
					) %>%#
					setnames(#
						., #
						"rvar_observed_minus_true", #
						paste(#
							rvar[i], #
							"_", #
							ratio.statistics[j], #
							"_observed_minus_true", #
							sep=""#
						)#
					)#
			}#
		}#
	}#
	# calculate squared differences (observed - mean of observed) for each variable#
	for (i in 1:length(variables)) {#
		X %<>%#
			mutate(#
				var_observed_minus_mean_of_observed_means = #
						# (observed -#
						eval(#
							parse(#
								text = paste(#
									"X$", #
									variables[i], #
									"_mean_observed", #
									sep=""#
								)#
							)#
						) - #
						# true)#
						eval(#
							parse(#
								text = paste(#
									"X$", #
									variables[i], #
									"_mean_of_observed_means", #
									sep=""#
								)#
							)#
						)#
			) %>%#
			setnames(#
				., #
				"var_observed_minus_mean_of_observed_means", #
				paste(#
					variables[i], #
					"_observed_minus_mean_of_observed_means", #
					sep=""#
				)#
			)	#
	}#
	if (!(is.null(rvar))) {#
		for (i in 1:length(rvar)) {#
			X %<>%#
				mutate(#
					var_observed_minus_mean_of_observed_means = #
							# (observed -#
							eval(#
								parse(#
									text = paste(#
										"X$", #
										rvar[i], #
										"_mean_observed", #
										sep=""#
									)#
								)#
							) - #
							# true)#
							eval(#
								parse(#
									text = paste(#
										"X$", #
										rvar[i], #
										"_mean_of_observed_means", #
										sep=""#
									)#
								)#
							)#
				) %>%#
				setnames(#
					., #
					"var_observed_minus_mean_of_observed_means", #
					paste(#
						rvar[i], #
						"_observed_minus_mean_of_observed_means", #
						sep=""#
					)#
				)	#
		}#
	}#
	# calculate bias and MSE#
	A <- vector("list", length(variables))#
	X.grp <- X %>% group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	for (i in 1:length(variables)) {#
		A[[i]] <- list()#
		A[[i]] <- X.grp %>%#
			summarise_(#
				# save true mean#
				var_true_mean = interp(#
					~var[1], #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean", #
							sep=""#
						)#
					)#
				),#
				# calculate mean of observed means#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate sum of MSEs#
				var_sum_of_observed_minus_true_sqrd = interp(#
					~sum(var^2, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed_minus_true",#
							sep=""#
						)#
					)#
				),#
				# calculate mean of simulated HT variance estimates#
				var_mean_of_var_estimates = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_var_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate variance of simulated HT mean estimates#
				var_var_of_mean_estimates = interp(#
					~var(variable, na.rm = TRUE), #
					variable = #
					as.name(#
						paste(#
							variables[i],#
							"_observed_minus_mean_of_observed_means",#
							sep=""#
						)#
					)#
				)#
			) %>%#
				as.data.frame#
			A[[i]] %<>% #
				mutate(#
					# var_mean = Mean()#
					var_RB = 100 * #
						(var_mean_of_observed_means - var_true_mean) / #
						var_true_mean,#
					var_MSE = var_sum_of_observed_minus_true_sqrd/n_sims,#
					var_var_RB = 100 * (var_mean_of_var_estimates - #
						var_var_of_mean_estimates) / #
						var_var_of_mean_estimates#
				) %>%#
				setnames(#
		      		.,#
		      		"var_RB",#
		      		paste(#
		      			variables[i],#
		      			"_mean_RB",#
		      			sep=""#
					)#
				) %>%#
				setnames(#
		      		.,#
		      		"var_MSE",#
		      		paste(#
		      			variables[i],#
		      			"_mean_MSE",#
		      			sep=""#
					)#
				) %>%#
				setnames(#
		      		.,#
		      		"var_var_RB",#
		      		paste(#
		      			variables[i],#
		      			"_var_RB",#
		      			sep=""#
					)#
				) %>%#
				dplyr::select(-c(#
					var_true_mean,#
					var_mean_of_observed_means,#
					var_sum_of_observed_minus_true_sqrd,#
					var_mean_of_var_estimates,#
					var_var_of_mean_estimates#
				))#
	}#
	if (ACS==TRUE) {#
		X$Prop.Area.Surveyed = with(X, N.Total.plots/N)		#
	} else {#
		X$Prop.Area.Surveyed = with(X, N.SRSWOR.plots/N)#
	}
setwd('/Users/KSauby/Documents/Projects/ACS/R')
X$Prop.Area.Surveyed = with(X, N.Total.plots/N)
dim(x)
dim(X)
setwd('/Users/KSauby/Documents/Projects/ACS/R')
. <- NULL#
	X <- merge(population_data_summary, simulation_data, by=grouping.variables)#
	# number of simulations#
	n_sims <- X %>% #
		group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots")) %>%#
		summarise(n_sims = length(N.Total.plots))#
	X <- merge(X, n_sims, by=c(grouping.variables, "N.SRSWOR.plots"))#
	# mean of observed means	#
	temp <- X %>% group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	A <- vector("list", length(variables))#
	for (i in 1:length(variables)) {#
		A[[i]] <- list()#
		A[[i]] <- temp %>%#
			summarise_(#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				)#
			) %>%#
			setnames(#
		      	.,#
		      	"var_mean_of_observed_means",#
		      	paste(#
		      		variables[i],#
		      		"_mean_of_observed_means",#
		      		sep=""#
				)#
			)#
	}#
	Y <- Reduce(#
		function(x, y) merge(#
			x, y,#
			by=c(grouping.variables, "N.SRSWOR.plots", "n_sims")#
		),#
		A#
	)#
	if (!(is.null(rvar))) {#
		for (i in 1:length(rvar)) {#
			A[[i]] <- list()#
			A[[i]] <- temp %>%#
				summarise_(#
					var_mean_of_observed_means = interp(#
						~mean(var, na.rm = TRUE), #
						var = #
						as.name(#
							paste(#
								rvar[i],#
								"_mean_observed",#
								sep=""#
							)#
						)#
					)#
				) %>%#
				setnames(#
			      	.,#
			      	"var_mean_of_observed_means",#
			      	paste(#
			      		rvar[i],#
			      		"_mean_of_observed_means",#
			      		sep=""#
					)#
				)#
		}#
		Z <- Reduce(#
			function(x, y) merge(#
				x, y,#
				by=c(grouping.variables, "N.SRSWOR.plots", "n_sims")#
			),#
			A#
		)#
		Y <- merge(#
			Y, Z,#
			by=c(grouping.variables, "N.SRSWOR.plots", "n_sims")#
		)#
	}#
	X <- merge(X, Y, by=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	# calculate squared differences for each simulation and variable#
	for (i in 1:length(variables)) {#
		for (j in 1:length(statistics)) {#
			X %<>%#
				mutate(#
					var_observed_minus_true = #
							# (observed -#
							eval(#
								parse(#
									text=paste(#
										"X$", #
										variables[i], #
										"_", #
										statistics[j], #
										"_observed", #
										sep=""#
									)#
								)#
							) - #
							# true)#
							eval(#
								parse(#
									text=paste(#
										"X$", #
										variables[i], #
										"_", #
										statistics[j], #
										sep=""#
									)#
								)#
							)#
				) %>%#
				setnames(#
					., #
					"var_observed_minus_true", #
					paste(#
						variables[i], #
						"_", #
						statistics[j], #
						"_observed_minus_true", #
						sep=""#
					)#
				)	#
		}#
	}#
	if (!(is.null(rvar))) {#
		for (i in 1:length(rvar)) {#
			for (j in 1:length(ratio.statistics)) {#
				X %<>%#
					mutate(#
						rvar_observed_minus_true = #
								# (observed -#
								eval(parse(text=paste(#
									"X$", #
									rvar[i],#
								 	"_", #
									ratio.statistics[j], #
									"_observed", #
									sep=""#
								))) - #
								# true)#
								eval(parse(text=paste(#
									"X$", #
									rvar[i], #
									"_ratio_", #
									ratio.statistics[j], #
									sep=""#
								)))#
					) %>%#
					setnames(#
						., #
						"rvar_observed_minus_true", #
						paste(#
							rvar[i], #
							"_", #
							ratio.statistics[j], #
							"_observed_minus_true", #
							sep=""#
						)#
					)#
			}#
		}#
	}#
	# calculate squared differences (observed - mean of observed) for each variable#
	for (i in 1:length(variables)) {#
		X %<>%#
			mutate(#
				var_observed_minus_mean_of_observed_means = #
						# (observed -#
						eval(#
							parse(#
								text = paste(#
									"X$", #
									variables[i], #
									"_mean_observed", #
									sep=""#
								)#
							)#
						) - #
						# true)#
						eval(#
							parse(#
								text = paste(#
									"X$", #
									variables[i], #
									"_mean_of_observed_means", #
									sep=""#
								)#
							)#
						)#
			) %>%#
			setnames(#
				., #
				"var_observed_minus_mean_of_observed_means", #
				paste(#
					variables[i], #
					"_observed_minus_mean_of_observed_means", #
					sep=""#
				)#
			)	#
	}#
	if (!(is.null(rvar))) {#
		for (i in 1:length(rvar)) {#
			X %<>%#
				mutate(#
					var_observed_minus_mean_of_observed_means = #
							# (observed -#
							eval(#
								parse(#
									text = paste(#
										"X$", #
										rvar[i], #
										"_mean_observed", #
										sep=""#
									)#
								)#
							) - #
							# true)#
							eval(#
								parse(#
									text = paste(#
										"X$", #
										rvar[i], #
										"_mean_of_observed_means", #
										sep=""#
									)#
								)#
							)#
				) %>%#
				setnames(#
					., #
					"var_observed_minus_mean_of_observed_means", #
					paste(#
						rvar[i], #
						"_observed_minus_mean_of_observed_means", #
						sep=""#
					)#
				)	#
		}#
	}#
	# calculate bias and MSE#
	A <- vector("list", length(variables))#
	X.grp <- X %>% group_by_(.dots=c(grouping.variables, "N.SRSWOR.plots", "n_sims"))#
	for (i in 1:length(variables)) {#
		A[[i]] <- list()#
		A[[i]] <- X.grp %>%#
			summarise_(#
				# save true mean#
				var_true_mean = interp(#
					~var[1], #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean", #
							sep=""#
						)#
					)#
				),#
				# calculate mean of observed means#
				var_mean_of_observed_means = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate sum of MSEs#
				var_sum_of_observed_minus_true_sqrd = interp(#
					~sum(var^2, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_mean_observed_minus_true",#
							sep=""#
						)#
					)#
				),#
				# calculate mean of simulated HT variance estimates#
				var_mean_of_var_estimates = interp(#
					~mean(var, na.rm = TRUE), #
					var = #
					as.name(#
						paste(#
							variables[i],#
							"_var_observed",#
							sep=""#
						)#
					)#
				),#
				# calculate variance of simulated HT mean estimates#
				var_var_of_mean_estimates = interp(#
					~var(variable, na.rm = TRUE), #
					variable = #
					as.name(#
						paste(#
							variables[i],#
							"_observed_minus_mean_of_observed_means",#
							sep=""#
						)#
					)#
				)#
			) %>%#
				as.data.frame#
			A[[i]] %<>% #
				mutate(#
					# var_mean = Mean()#
					var_RB = 100 * #
						(var_mean_of_observed_means - var_true_mean) / #
						var_true_mean,#
					var_MSE = var_sum_of_observed_minus_true_sqrd/n_sims,#
					var_var_RB = 100 * (var_mean_of_var_estimates - #
						var_var_of_mean_estimates) / #
						var_var_of_mean_estimates#
				) %>%#
				setnames(#
		      		.,#
		      		"var_RB",#
		      		paste(#
		      			variables[i],#
		      			"_mean_RB",#
		      			sep=""#
					)#
				) %>%#
				setnames(#
		      		.,#
		      		"var_MSE",#
		      		paste(#
		      			variables[i],#
		      			"_mean_MSE",#
		      			sep=""#
					)#
				) %>%#
				setnames(#
		      		.,#
		      		"var_var_RB",#
		      		paste(#
		      			variables[i],#
		      			"_var_RB",#
		      			sep=""#
					)#
				) %>%#
				dplyr::select(-c(#
					var_true_mean,#
					var_mean_of_observed_means,#
					var_sum_of_observed_minus_true_sqrd,#
					var_mean_of_var_estimates,#
					var_var_of_mean_estimates#
				))#
	}#
	Y <- Reduce(#
		function(x, y) merge(#
			x, y,#
			by=c(grouping.variables, "N.SRSWOR.plots", "n_sims")#
		),#
		A#
	)
